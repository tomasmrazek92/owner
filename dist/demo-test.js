"use strict";(()=>{var i=(e,t)=>{$(`input[name=${e}]`).val(t)};var x=e=>{let t=localStorage.getItem(e);try{return JSON.parse(t)}catch{return t}};var j="restaurant";var V=()=>{let e=JSON.parse(localStorage.getItem(j)),t=["bar","cafe","bakery","food","restaurant"];for(let a=0;a<t.length;a++)if(e.types.includes(t[a]))return!0;return!1};function T(e){let a=/^([\w-\.]+@([\w-]+\.)+[\w-]{2,4})?$/.test($(e).val());return f($(e),!a,"Please fill correct email address."),a}function z(e){let t=!0;return t=L(e),t}var I=!1;function L(e){if(I)return I=!1,!0;let t=V();return t?f($(e),!1):f($(e),!0,"Are you sure this is correct? Please update your entry to a recognized restaurant."),I=!0,t}function G(e){let t,a=$(e).siblings(".select2"),o=$(e).siblings(".nice-select");a?t=a.find(".select2-selection--single"):o?t=$(o):t=$(e);let r=!0;return $(e).val()===""?(validArr.push(selectVal),$(t).addClass("is-invalid"),r=!1):$(t).removeClass("is-invalid"),r}function M(e){return f($(e),!1),!0}function H(e){return $(e).attr("name")==="restaurant-name"&&f($(e),!0,"Please select a business location from the search results."),f($(e),!0),!1}var P=e=>{let t=e,a=!0;return $(t).prop("required")&&($(t).val()?$(t).is('[type="email"]')?a=T(t):$(t).attr("name")==="restaurant-name"?a=z(t):$(t).is("select")?a=G(t):a=M(t):a=H(t)),a?f($(t),!1):$(t).addClass("error"),a},f=(e,t,a)=>{let o=$(e).closest(".form-field-wrapper, [field-wrapper]").find(".field-validation, [field-validation]");$(e).closest(".form-field, [form-field]").toggleClass("error",t),o.toggle(t),a&&o.text(a)};var E=(e,r,a)=>{var o=$(e),r=$(r);Object.keys(a).forEach(function(d){var m=a[d],h=o.find('input[name="'+d.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&")+'"]');h.length===0&&(h=o.find('select[name="'+d.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&")+'"]'));var g=h.val();Array.isArray(m)||(m=[m]),m.forEach(function(v){var u=r.find("input[name="+v.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&")+"]");u.attr("type")==="checkbox"?String(g).toLowerCase()==="true"?u.prop("checked",!0):u.prop("checked",!1):Q(u,".hs-datepicker")?u.siblings("input[readonly]").val(g).change():u.val(g),["phone","mobilephone","email","pred_gmv"].includes(v)&&(u.get(0).focus({preventScrol:!0}),u.get(0).blur())})})},J=e=>{let t=!1;var a=e.find("input[name=mobilephone]").parent().siblings(".hs-error-msgs").find(".hs-error-msg").text(),o=$('input[name="cellphone"]').closest("[field-wrapper]").find("[field-validation]");a?(t=!0,o.text(a),o.show()):o.hide();var r=e.find("input[name=email]").closest(".hs-fieldtype-text").find(".hs-error-msgs").find(".hs-error-msg").text(),d=$('input[name="email"]').closest("[field-wrapper]").find("[field-validation]");return r?(d.text(r),d.show(),t=!0):d.hide(),t};function q(e){R(e)}function O(){return new Promise(function(e){R=e})}var C=e=>{let t=$('[data-form="submit-btn"]'),a,o=()=>{t.addClass("disabled")},r=()=>{t.removeClass("disabled")};b(!0),o(),setTimeout(()=>{a=J(e),r(),a?b(!1):e.find("input[type=submit]").trigger("click")},3e3)};function b(e){let t=$(".n_demo-form_loading");e?(t.find('[data-animation-type="lottie"]').trigger("click"),t.fadeIn()):t.hide()}var R;function Q(e,t){let a=e[0]||e.get(0);if(!a)return!1;let{parentNode:o}=a;return o?Array.from(o.children).some(r=>r!==a&&r.matches(t)):!1}$(document).ready(()=>{let e,t=()=>x("restaurant");function a(){return new Promise((n,s)=>{try{let p=t();e=void 0;let _=$('select[name="person-type"]').val()==="I'm a restaurant owner or manager",l=$('input[name="number-of-locations"]').val()>1,c=p.address_components.some(S=>S.short_name==="US");_&&l&&(e=!0),(!_||!c)&&(e=!1),n()}catch(p){s(p)}})}function o(){let n=t(),s={name:n.name,address:n.formatted_address,website:n.website,email:"jonathan@owner.com",token:"AJXuyxPXgGF68NMv",sfdc_id:"None"},p;function _(l){return new Promise((c,S)=>{$.ajax({url:"https://owner-ops.net/business-info/",type:"POST",contentType:"application/json",dataType:"json",data:JSON.stringify(l),timeout:15e3,success:function(F){c(F)},error:function(F,N,k){N==="timeout"?(console.log("Error occurred:",k),i("execution_time_seconds",15),i("gmv_pred",0),c("")):(console.log("Error occurred:",k),c(""))}})})}return _(s).then(l=>(console.log(l),l[0])).catch(l=>(console.error("Error:",l),!1))}function r(n,s){let p=$("#demo-form input"),_=["brizo_id","base_enrich_date","inbound_add_to_cadence","execution_time_seconds","auto_dq_flag","auto_dq_reason","gmv_pred","inbound_add_to_cadence"];s?p.each(function(){let l=$(this).attr("name");if(_.includes(l)&&n.hasOwnProperty(l)){var c=n[l];typeof c=="number"||!isNaN(c)&&!isNaN(parseFloat(c))?$(this).val(Number(c).toFixed(2)):$(this).val(c)}}):m(!1)}function d(){let n=!0;return y.find(":input:visible, select").each(function(){let s=P($(this));n=n&&s}),n}function m(n){i("base_enrich_date",new Date().toISOString().slice(0,10)),i("inbound_add_to_cadence","true"),n&&(i("execution_time_seconds",0),i("auto_dq_flags","true")),n===!0&&(i("auto_dq_reason","none"),i("auto_dq_flags","false"))}function h(){i("page_url",window.location.pathname),i("page_lang",$("html").attr("lang")),i("url",(()=>{var n=t(),s=n.url;return s.split("cid=")[1]})())}async function g(){if(d()){b(!0);try{if(await a(),typeof e!="boolean"){let s=await o();typeof s.auto_dq_flag=="string"?(e=s.auto_dq_flag!=="True",r(s,!0)):(e=!1,r(s,!1))}else m(e)}catch(s){e=!1,console.log("Qualification check or call failed:",s)}h(),E(y,w,A),C(w)}}function v(){g()}let u=()=>{let n=$(".n_demo-form_success");b(!1),y.hide(),n.show(),window.location.href=e?"https://meetings.hubspot.com/brandon767/sales-inbound-round-robin":"https://www.owner.com/funnel-demo-requested"},y=$("#demo-form"),w;hbspt.forms.create({portalId:"6449395",formId:"f3807262-aed3-4b9c-93a3-247ad4c55e60",target:"#hbst-form",onFormReady:q,onFormSubmitted:u}),O().then(function(n){w=$(n)});let A={name:["company","0-2/name"],international_phone_number:["phone","0-2/phone"],"restaurant-address":["address","0-2/address"],locality:["city","0-2/city"],administrative_area_level_1:["state","0-2/state"],postal_code:["zip","0-2/zip"],country:["country","0-2/country"],"first-name":"firstname","last-name":"lastname",cellphone:"mobilephone",email:"email","person-type":"lead_person_type",website:"website",place_id:"place_id",url:"place_cid",place_types:["place_types_contact","0-2/place_types"],rating:"place_rating",user_ratings_total:"user_ratings_total","number-of-locations":"of_locations_number",hear:"how_did_you_hear_about_us",page_url:"last_pdf_download",page_lang:"page_lang",brizo_id:["brizo_id","0-2/brizo_id_account"],base_enrich_date:["auto_enrich_date","0-2/auto_enrich_date_company"],inbound_add_to_cadence:"inbound_add_to_cadence",execution_time_seconds:"auto_enrich_time",auto_dq_flag:"auto_dq_static",auto_dq_reason:["auto_dq_reason","0-2/auto_dq_reason_company"],gmv_pred:["pred_gmv","0-2/pred_gmv_company"]};$("[data-form=submit-btn]").on("click",v),$(".nice-select li").on("click",function(){$(".nice-select .current").css("color","white")}),$('select[name="person-type"]').on("change",function(){$(this).val()==="I'm a restaurant owner or manager"?$("#locations-wrap").show():$("#locations-wrap").hide()})});})();
