"use strict";(()=>{var w,Q=new Uint8Array(16);function E(){if(!w&&(w=typeof crypto!="undefined"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!w))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return w(Q)}var i=[];for(let t=0;t<256;++t)i.push((t+256).toString(16).slice(1));function T(t,e=0){return i[t[e+0]]+i[t[e+1]]+i[t[e+2]]+i[t[e+3]]+"-"+i[t[e+4]]+i[t[e+5]]+"-"+i[t[e+6]]+i[t[e+7]]+"-"+i[t[e+8]]+i[t[e+9]]+"-"+i[t[e+10]]+i[t[e+11]]+i[t[e+12]]+i[t[e+13]]+i[t[e+14]]+i[t[e+15]]}var X=typeof crypto!="undefined"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),V={randomUUID:X};function Y(t,e,n){if(V.randomUUID&&!e&&!t)return V.randomUUID();t=t||{};let o=t.random||(t.rng||E)();if(o[6]=o[6]&15|64,o[8]=o[8]&63|128,e){n=n||0;for(let s=0;s<16;++s)e[n+s]=o[s];return e}return T(o)}var C=Y;var O=(t,e)=>{let n=$(`input[name="${t}"]`);n.attr("type")==="checkbox"?n.prop("checked",e):n.val(e)};var x=t=>{let e=localStorage.getItem(t);try{return JSON.parse(e)}catch{return e}},F=(t,e)=>{let n=typeof e=="object"?JSON.stringify(e):e;localStorage.setItem(t,n)};var I="restaurant";var j=!1,q=t=>{let e=JSON.parse(localStorage.getItem("restaurant"));if(console.log(e),e&&Array.isArray(e.types)){let n=["bar","cafe","bakery","food","restaurant"];return!e.types.some(s=>n.includes(s))&&!j?(c(t),j=!0,!1):!0}return!1};function Z(t){let n=/^[\w-\.]+@([\w-]+\.)+[\w-]{2,}$/.test($(t).val());return c($(t),!n,"Please fill correct email address."),n}function ee(t){let e=!0;return e=te(t),e}function te(t){let e=q(t);return e?c($(t),!1):c($(t),!0),e}function ne(t){let e,n=$(t).siblings(".select2"),o=$(t).siblings(".nice-select");n?e=n.find(".select2-selection--single"):o?e=$(o):e=$(t);let s=!0;return $(t).val()===""?(validArr.push(selectVal),$(e).addClass("is-invalid"),s=!1):$(e).removeClass("is-invalid"),s}function ae(t){return $(t).is(":checked")?(c($(t),!1),!0):(c($(t),!0),!1)}function re(t){let e=$(t).attr("name"),n=$(`input[name="${e}"]`);return n.is(":checked")?($(n).closest(".radio-group").removeClass("is-invalid"),c($(n[0]),!1),!0):($(n).closest(".radio-group").addClass("is-invalid"),c($(n[0]),!0,"Please select an option."),!1)}function oe(t){return c($(t),!1),!0}function se(t){return $(t).attr("name")==="restaurant-name"&&c($(t),!0,"Please select a business location from the search results."),c($(t),!0),!1}var R=t=>{let e=t,n=!0;return $(e).prop("required")&&($(e).is('[type="checkbox"]')?n=ae(e):$(e).is('[type="radio"]')?n=re(e):$(e).val()?$(e).is('[type="email"]')?n=Z(e):$(e).attr("name")==="restaurant-name"?n=ee(e):$(e).is("select")?n=ne(e):n=oe(e):n=se(e)),n?c($(e),!1):$(e).addClass("error"),n},c=(t,e,n)=>{let o=$(t).closest(".form-field-wrapper, [field-wrapper]").find(".field-validation, [field-validation]");$(t).closest(".form-field, [form-field]").toggleClass("error",e),o.toggle(e),n&&o.text(n)};var ie={name:["company","0-2/name"],international_phone_number:["phone","0-2/phone"],"restaurant-address":["address","0-2/address"],locality:["city","0-2/city"],administrative_area_level_1:["state","0-2/state"],postal_code:["zip","0-2/zip"],country:["country","0-2/country"],"first-name":"firstname","last-name":"lastname",cellphone:"mobilephone",email:"email","person-type":"lead_person_type",website:"website",place_id:"place_id",url:"place_cid",place_types:["place_types_contact","0-2/place_types"],rating:"place_rating",user_ratings_total:"user_ratings_total","number-of-locations":"of_locations_number",hear:"how_did_you_hear_about_us",page_url:"last_pdf_download",page_lang:"page_lang",brizo_id:["brizo_id","0-2/brizo_id_account"],base_enrich_date:["auto_enrich_date","0-2/auto_enrich_date_company"],inbound_add_to_cadence:"inbound_add_to_cadence",execution_time_seconds:"auto_enrich_time",auto_dq_flag:"auto_dq_static",auto_dq_reason:["auto_dq_reason","0-2/auto_dq_reason_company"],gmv_pred:["pred_gmv","0-2/pred_gmv_company"],brand_emrr:"default_brand_emrr",sms_opt_in:"sms_opt_in",referrer_s_name:"referrer_s_name",referrer_s_last_name:"referrer_s_last_name",referrer_s_phone_number:"referrer_s_phone_number",referrer_s_email:"referrer_s_email"},le=(t,o)=>{var n=$(t),o=$(o),s=ie;Object.keys(s).forEach(function(d){var f=s[d],m=n.find('input[name="'+d.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&")+'"]');m.length===0&&(m=n.find('select[name="'+d.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&")+'"]'));var h=m.val();m.attr("type")==="checkbox"&&(h=m.is(":checked")?"true":"false"),Array.isArray(f)||(f=[f]),f.forEach(function(g){var u=o.find("input[name="+g.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&")+"]");if(u.attr("type")==="checkbox"?u.prop("checked",String(h).toLowerCase()==="true"):de(u,".hs-datepicker")?u.siblings("input[readonly]").val(h).change():u.val(h),["phone","mobilephone","email","pred_gmv"].includes(g)){let _=u.get(0);_&&(_.focus({preventScroll:!0}),_.blur())}})})},ce=t=>{let e=!1;var n=t.find("input[name=mobilephone]").parent().siblings(".hs-error-msgs").find(".hs-error-msg").text(),o=$('input[name="cellphone"]').closest("[field-wrapper]").find("[field-validation]");n?(e=!0,o.text(n),o.show()):o.hide();var s=t.find("input[name=email]").closest(".hs-fieldtype-text").find(".hs-error-msgs").find(".hs-error-msg").text(),d=$('input[name="email"]').closest("[field-wrapper]").find("[field-validation]");return s?(d.text(s),d.show(),e=!0):d.hide(),e};function G(t){z(t)}function D(){return new Promise(function(t){z=t})}var N=(t,e,n)=>(le(t,e),new Promise(o=>{let s;setTimeout(()=>{s=ce(e),o(!s)},3e3)}));var z;function de(t,e){let n=t[0]||t.get(0);if(!n)return!1;let{parentNode:o}=n;return o?Array.from(o.children).some(s=>s!==n&&s.matches(e)):!1}$(document).ready(()=>{let t=typeof devEnv!="undefined"&&devEnv?"https://dev-api.owner.com":"https://api.owner.com",e=!!(typeof devEnv!="undefined"&&devEnv),n=x("userId");n||(n=C(),F("userId",n));let o=$(".main-wrapper"),s=$(".growth-form"),d=$(".growth-loading"),f=$(".growth-error");function m(){$(o).add(f).add(s).stop().fadeOut(500,function(){$(d).fadeIn(400)});let r=$(".growth-loading_step"),a=0;function l(){a<r.length-1&&r.eq(a).fadeOut(1e3,function(){a+=1,r.eq(a).fadeIn(1e3),setTimeout(l,4e3)})}r.hide().eq(a).show(),setTimeout(l,4e3)}function h(){$(o).add(d).add(s).stop().hide(),$(f).stop().fadeIn()}function g(r){return x(r).place_id}let u=async r=>{let a=await fetch(`${t}/generator/v1/generations`,{method:"POST",headers:{"Content-Type":"application/json","Access-Control-Allow-Origin":"*"},body:JSON.stringify({googleId:r})});return a.ok||console.error("POST request error:",a.status,await a.text()),await a.json()},_=async r=>await(await fetch(`${t}/generator/v1/generations/${r}`)).json(),A=new Set,L=r=>{let{status:a}=r;return A.has(a)||(console.log("Checking Generation Status:",r),A.add(a)),a},W=async r=>{try{let{id:a}=await u(r);if(!a)throw new Error("Invalid ID received from POST request");return new Promise((l,y)=>{let b=setInterval(async()=>{let U=await _(a),k=L(U);if(k!=="processing"){if(clearInterval(b),k!=="success")return y(new Error(k));l(U)}},1e3)})}catch(a){let l=a.message.includes("error")||a.message.includes("cancelled")?a.message:"";return{message:a.message,status:l}}};function v(r,a,l,y){let b=a;console.log(b),y&&(b.location.errorMessage=y),typeof FS!="undefined"&&FS&&FS.event(l,FS.identify(r,b))}function H(r,a){console.log("Success:",r);let l=r.redirectUri+(e?"":"&fsUserId="+n);v(n,{location:{requestBody:a},generatedUrl:l},"Website Generation Successful"),setTimeout(()=>{window.location.href=l},250)}function M(r,a){console.log("Error:",r),h(),v(n,{location:{requestBody:a}},"Website Generation Failed",respoonse)}function J(r,a){console.log("Error:",r.message),h(),v(n,{location:{requestBody:a}},"Website Generation Failed",r.message)}async function P(r){m();try{let a=await W(r);a&&a.status==="success"?H(a,r):M(a,r)}catch(a){J(a,r)}}let p=$("#growth-form"),S,B=()=>{v(n,{displayName:p.find($("input[name=first-name]")).val()+" "+p.find($("input[name=last-name]")).val(),email:p.find($("input[name=email]")).val(),firstName:p.find($("input[name=first-name]")).val(),lastName:p.find($("input[name=last-name]")).val(),phone:p.find($("input[name=cellphone]")).val()},"Enter Contact Information Successful");let r=g(I);P(r)};$("[data-form=generateBtn]").on("click",async function(){if(!R($("input[name=restaurant-name]")))return console.log("Validation Invalid");if(e){let l=g(I);P(l);return}let a=g(I);v(n,{location:{requestBody:a}},"Website Generation Started"),$(o).fadeOut(500,function(){$(s).fadeIn(400)})}),hbspt.forms.create({portalId:"6449395",formId:"f3807262-aed3-4b9c-93a3-247ad4c55e60",target:"#hbst-form",onFormReady:G,onFormSubmitted:B}),D().then(function(r){S=$(r)});let K={name:["company","0-2/name"],international_phone_number:["phone","0-2/phone"],"restaurant-address":["address","0-2/address"],locality:["city","0-2/city"],administrative_area_level_1:["state","0-2/state"],postal_code:["zip","0-2/zip"],country:["country","0-2/country"],"first-name":"firstname","last-name":"lastname",cellphone:"mobilephone",email:"email","person-type":"lead_person_type",website:"website",place_id:"place_id",place_types:["place_types_contact","0-2/place_types"],rating:"place_rating",user_ratings_total:"user_ratings_total",hear:"how_did_you_hear_about_us",page_url:"last_pdf_download"};$("[data-form=submit-btn]").on("click",function(r){r.preventDefault();let a=!0;p.find(":input:visible, select").each(function(){let l=R($(this));a=a&&l}),a&&(O("page_url",window.location.pathname),fillHubSpot(p,S,K),N(S))})});})();
