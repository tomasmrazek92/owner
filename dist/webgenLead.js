"use strict";(()=>{var b,Q=new Uint8Array(16);function E(){if(!b&&(b=typeof crypto!="undefined"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!b))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return b(Q)}var i=[];for(let t=0;t<256;++t)i.push((t+256).toString(16).slice(1));function U(t,e=0){return i[t[e+0]]+i[t[e+1]]+i[t[e+2]]+i[t[e+3]]+"-"+i[t[e+4]]+i[t[e+5]]+"-"+i[t[e+6]]+i[t[e+7]]+"-"+i[t[e+8]]+i[t[e+9]]+"-"+i[t[e+10]]+i[t[e+11]]+i[t[e+12]]+i[t[e+13]]+i[t[e+14]]+i[t[e+15]]}var X=typeof crypto!="undefined"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),k={randomUUID:X};function Y(t,e,n){if(k.randomUUID&&!e&&!t)return k.randomUUID();t=t||{};let r=t.random||(t.rng||E)();if(r[6]=r[6]&15|64,r[8]=r[8]&63|128,e){n=n||0;for(let s=0;s<16;++s)e[n+s]=r[s];return e}return U(r)}var V=Y;var C=(t,e)=>{let n=$(`input[name="${t}"]`);n.attr("type")==="checkbox"?n.prop("checked",e):n.val(e)};var w=t=>{let e=localStorage.getItem(t);try{return JSON.parse(e)}catch{return e}},O=(t,e)=>{let n=typeof e=="object"?JSON.stringify(e):e;localStorage.setItem(t,n)};var x="restaurant";var T=!1,j=t=>{let e=JSON.parse(localStorage.getItem("restaurant"));if(console.log(e),e&&Array.isArray(e.types)){let n=["bar","cafe","bakery","food","restaurant"];return!e.types.some(s=>n.includes(s))&&!T?(c(t),T=!0,!1):!0}return!1};function Z(t){let n=/^[\w-\.]+@([\w-]+\.)+[\w-]{2,}$/.test($(t).val());return c($(t),!n,"Please fill correct email address."),n}function ee(t){let e=!0;return e=te(t),e}function te(t){let e=j(t);return e?c($(t),!1):c($(t),!0),e}function ne(t){let e,n=$(t).siblings(".select2"),r=$(t).siblings(".nice-select");n?e=n.find(".select2-selection--single"):r?e=$(r):e=$(t);let s=!0;return $(t).val()===""?(validArr.push(selectVal),$(e).addClass("is-invalid"),s=!1):$(e).removeClass("is-invalid"),s}function ae(t){return $(t).is(":checked")?(c($(t),!1),!0):(c($(t),!0),!1)}function oe(t){let e=$(t).attr("name"),n=$(`input[name="${e}"]`);return n.is(":checked")?($(n).closest(".radio-group").removeClass("is-invalid"),c($(n[0]),!1),!0):($(n).closest(".radio-group").addClass("is-invalid"),c($(n[0]),!0,"Please select an option."),!1)}function re(t){return c($(t),!1),!0}function se(t){return $(t).attr("name")==="restaurant-name"&&c($(t),!0,"Please select a business location from the search results."),c($(t),!0),!1}var F=t=>{let e=t,n=!0;return $(e).prop("required")&&($(e).is('[type="checkbox"]')?n=ae(e):$(e).is('[type="radio"]')?n=oe(e):$(e).val()?$(e).is('[type="email"]')?n=Z(e):$(e).attr("name")==="restaurant-name"?n=ee(e):$(e).is("select")?n=ne(e):n=re(e):n=se(e)),n?c($(e),!1):$(e).addClass("error"),n},c=(t,e,n)=>{let r=$(t).closest(".form-field-wrapper, [field-wrapper]").find(".field-validation, [field-validation]");$(t).closest(".form-field, [form-field]").toggleClass("error",e),r.toggle(e),n&&r.text(n)};var ie={name:["company","0-2/name"],international_phone_number:["phone","0-2/phone"],"restaurant-address":["address","0-2/address"],locality:["city","0-2/city"],administrative_area_level_1:["state","0-2/state"],postal_code:["zip","0-2/zip"],country:["country","0-2/country"],"first-name":"firstname","last-name":"lastname",cellphone:"mobilephone",email:"email","person-type":"lead_person_type",website:"website",place_id:"place_id",url:"place_cid",place_types:["place_types_contact","0-2/place_types"],rating:"place_rating",user_ratings_total:"user_ratings_total","number-of-locations":"of_locations_number",hear:"how_did_you_hear_about_us",page_url:"last_pdf_download",page_lang:"page_lang",brizo_id:["brizo_id","0-2/brizo_id_account"],base_enrich_date:["auto_enrich_date","0-2/auto_enrich_date_company"],inbound_add_to_cadence:"inbound_add_to_cadence",execution_time_seconds:"auto_enrich_time",auto_dq_flag:"auto_dq_static",auto_dq_reason:["auto_dq_reason","0-2/auto_dq_reason_company"],gmv_pred:["pred_gmv","0-2/pred_gmv_company"],referrer_s_phone_number:"referrer_s_phone_number"},le=(t,r)=>{var n=$(t),r=$(r),s=ie;Object.keys(s).forEach(function(d){var f=s[d],g=n.find('input[name="'+d.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&")+'"]');g.length===0&&(g=n.find('select[name="'+d.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&")+'"]'));var m=g.val();Array.isArray(f)||(f=[f]),f.forEach(function(h){var u=r.find("input[name="+h.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&")+"]");u.attr("type")==="checkbox"?String(m).toLowerCase()==="true"?u.prop("checked",!0):u.prop("checked",!1):de(u,".hs-datepicker")?u.siblings("input[readonly]").val(m).change():u.val(m),["phone","mobilephone","email","pred_gmv"].includes(h)&&(u.get(0).focus({preventScrol:!0}),u.get(0).blur())})})},ce=t=>{let e=!1;var n=t.find("input[name=mobilephone]").parent().siblings(".hs-error-msgs").find(".hs-error-msg").text(),r=$('input[name="cellphone"]').closest("[field-wrapper]").find("[field-validation]");n?(e=!0,r.text(n),r.show()):r.hide();var s=t.find("input[name=email]").closest(".hs-fieldtype-text").find(".hs-error-msgs").find(".hs-error-msg").text(),d=$('input[name="email"]').closest("[field-wrapper]").find("[field-validation]");return s?(d.text(s),d.show(),e=!0):d.hide(),e};function q(t){N(t)}function G(){return new Promise(function(t){N=t})}var D=(t,e)=>(le(t,e),new Promise(n=>{let r;setTimeout(()=>{r=ce(e),n(!r)},3e3)}));var N;function de(t,e){let n=t[0]||t.get(0);if(!n)return!1;let{parentNode:r}=n;return r?Array.from(r.children).some(s=>s!==n&&s.matches(e)):!1}$(document).ready(()=>{let t=typeof devEnv!="undefined"&&devEnv?"https://dev-api.owner.com":"https://api.owner.com",e=!!(typeof devEnv!="undefined"&&devEnv),n=w("userId");n||(n=V(),O("userId",n));let r=$(".main-wrapper"),s=$(".growth-form"),d=$(".growth-loading"),f=$(".growth-error");function g(){$(r).add(f).add(s).stop().fadeOut(500,function(){$(d).fadeIn(400)});let o=$(".growth-loading_step"),a=0;function l(){a<o.length-1&&o.eq(a).fadeOut(1e3,function(){a+=1,o.eq(a).fadeIn(1e3),setTimeout(l,4e3)})}o.hide().eq(a).show(),setTimeout(l,4e3)}function m(){$(r).add(d).add(s).stop().hide(),$(f).stop().fadeIn()}function h(o){return w(o).place_id}let u=async o=>{let a=await fetch(`${t}/generator/v1/generations`,{method:"POST",headers:{"Content-Type":"application/json","Access-Control-Allow-Origin":"*"},body:JSON.stringify({googleId:o})});return a.ok||console.error("POST request error:",a.status,await a.text()),await a.json()},z=async o=>await(await fetch(`${t}/generator/v1/generations/${o}`)).json(),R=new Set,L=o=>{let{status:a}=o;return R.has(a)||(console.log("Checking Generation Status:",o),R.add(a)),a},W=async o=>{try{let{id:a}=await u(o);if(!a)throw new Error("Invalid ID received from POST request");return new Promise((l,v)=>{let y=setInterval(async()=>{let P=await z(a),S=L(P);if(S!=="processing"){if(clearInterval(y),S!=="success")return v(new Error(S));l(P)}},1e3)})}catch(a){let l=a.message.includes("error")||a.message.includes("cancelled")?a.message:"";return{message:a.message,status:l}}};function _(o,a,l,v){let y=a;console.log(y),v&&(y.location.errorMessage=v),typeof FS!="undefined"&&FS&&FS.event(l,FS.identify(o,y))}function H(o,a){console.log("Success:",o);let l=o.redirectUri+(e?"":"&fsUserId="+n);_(n,{location:{requestBody:a},generatedUrl:l},"Website Generation Successful"),setTimeout(()=>{window.location.href=l},250)}function M(o,a){console.log("Error:",o),m(),_(n,{location:{requestBody:a}},"Website Generation Failed",respoonse)}function J(o,a){console.log("Error:",o.message),m(),_(n,{location:{requestBody:a}},"Website Generation Failed",o.message)}async function A(o){g();try{let a=await W(o);a&&a.status==="success"?H(a,o):M(a,o)}catch(a){J(a,o)}}let p=$("#growth-form"),I,B=()=>{_(n,{displayName:p.find($("input[name=first-name]")).val()+" "+p.find($("input[name=last-name]")).val(),email:p.find($("input[name=email]")).val(),firstName:p.find($("input[name=first-name]")).val(),lastName:p.find($("input[name=last-name]")).val(),phone:p.find($("input[name=cellphone]")).val()},"Enter Contact Information Successful");let o=h(x);A(o)};$("[data-form=generateBtn]").on("click",async function(){if(!F($("input[name=restaurant-name]")))return console.log("Validation Invalid");if(e){let l=h(x);A(l);return}let a=h(x);_(n,{location:{requestBody:a}},"Website Generation Started"),$(r).fadeOut(500,function(){$(s).fadeIn(400)})}),hbspt.forms.create({portalId:"6449395",formId:"f3807262-aed3-4b9c-93a3-247ad4c55e60",target:"#hbst-form",onFormReady:q,onFormSubmitted:B}),G().then(function(o){I=$(o)});let K={name:["company","0-2/name"],international_phone_number:["phone","0-2/phone"],"restaurant-address":["address","0-2/address"],locality:["city","0-2/city"],administrative_area_level_1:["state","0-2/state"],postal_code:["zip","0-2/zip"],country:["country","0-2/country"],"first-name":"firstname","last-name":"lastname",cellphone:"mobilephone",email:"email","person-type":"lead_person_type",website:"website",place_id:"place_id",place_types:["place_types_contact","0-2/place_types"],rating:"place_rating",user_ratings_total:"user_ratings_total",hear:"how_did_you_hear_about_us",page_url:"last_pdf_download"};$("[data-form=submit-btn]").on("click",function(o){o.preventDefault();let a=!0;p.find(":input:visible, select").each(function(){let l=F($(this));a=a&&l}),a&&(C("page_url",window.location.pathname),fillHubSpot(p,I,K),D(I))})});})();
