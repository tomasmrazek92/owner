"use strict";(()=>{var x,X=new Uint8Array(16);function E(){if(!x&&(x=typeof crypto!="undefined"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!x))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return x(X)}var i=[];for(let t=0;t<256;++t)i.push((t+256).toString(16).slice(1));function j(t,e=0){return(i[t[e+0]]+i[t[e+1]]+i[t[e+2]]+i[t[e+3]]+"-"+i[t[e+4]]+i[t[e+5]]+"-"+i[t[e+6]]+i[t[e+7]]+"-"+i[t[e+8]]+i[t[e+9]]+"-"+i[t[e+10]]+i[t[e+11]]+i[t[e+12]]+i[t[e+13]]+i[t[e+14]]+i[t[e+15]]).toLowerCase()}var Y=typeof crypto!="undefined"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),V={randomUUID:Y};function Z(t,e,n){if(V.randomUUID&&!e&&!t)return V.randomUUID();t=t||{};let a=t.random||(t.rng||E)();if(a[6]=a[6]&15|64,a[8]=a[8]&63|128,e){n=n||0;for(let s=0;s<16;++s)e[n+s]=a[s];return e}return j(a)}var F=Z;var O=(t,e)=>{$(`input[name=${t}]`).val(e)};var _=t=>{let e=localStorage.getItem(t);try{return JSON.parse(e)}catch{return e}},P=(t,e)=>{let n=typeof e=="object"?JSON.stringify(e):e;localStorage.setItem(t,n)};var w="restaurant";var A=()=>{let t=JSON.parse(localStorage.getItem(w)),e=["bar","cafe","bakery","food","restaurant"];for(let n=0;n<e.length;n++)if(t.types.includes(e[n]))return!0;return!1};function ee(t){let n=/^([\w-\.]+@([\w-]+\.)+[\w-]{2,4})?$/.test($(t).val());return m($(t),!n,"Please fill correct email address."),n}function te(t){let e=!0;return e=ne(t),e}var R=!1;function ne(t){if(R)return R=!1,!0;let e=A();return e?m($(t),!1):m($(t),!0,"Are you sure this is correct? Please update your entry to a recognized restaurant."),R=!0,e}function oe(t){let e,n=$(t).siblings(".select2"),a=$(t).siblings(".nice-select");n?e=n.find(".select2-selection--single"):a?e=$(a):e=$(t);let s=!0;return $(t).val()===""?(validArr.push(selectVal),$(e).addClass("is-invalid"),s=!1):$(e).removeClass("is-invalid"),s}function re(t){return m($(t),!1),!0}function ae(t){return $(t).attr("name")==="restaurant-name"&&m($(t),!0,"Please select a business location from the search results."),m($(t),!0),!1}var k=t=>{let e=t,n=!0;return $(e).prop("required")&&($(e).val()?$(e).is('[type="email"]')?n=ee(e):$(e).attr("name")==="restaurant-name"?n=te(e):$(e).is("select")?n=oe(e):n=re(e):n=ae(e)),n?m($(e),!1):$(e).addClass("error"),n},m=(t,e,n)=>{let a=$(t).closest(".form-field-wrapper, [field-wrapper]").find(".field-validation, [field-validation]");$(t).closest(".form-field, [form-field]").toggleClass("error",e),a.toggle(e),n&&a.text(n)};var G=(t,s,n)=>{var a=$(t),s=$(s);Object.keys(n).forEach(function(c){var d=n[c],p=a.find('input[name="'+c.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&")+'"]');p.length===0&&(p=a.find('select[name="'+c.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&")+'"]'));var g=p.val();Array.isArray(d)||(d=[d]),d.forEach(function(u){var h=s.find("input[name="+u.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&")+"]");h.val(g),["phone","mobilephone","email"].includes(u)&&(h.get(0).focus(),h.get(0).blur())})})},se=t=>{let e=!1;var n=t.find("input[name=mobilephone]").parent().siblings(".hs-error-msgs").find(".hs-error-msg").text(),a=$('input[name="cellphone"]').closest("[field-wrapper]").find("[field-validation]");n?(e=!0,a.text(n),a.show()):a.hide();var s=t.find("input[name=email]").closest(".hs-fieldtype-text").find(".hs-error-msgs").find(".hs-error-msg").text(),c=$('input[name="email"]').closest("[field-wrapper]").find("[field-validation]");return s?(c.text(s),c.show(),e=!0):c.hide(),e};function D(t){W(t)}function L(){return new Promise(function(t){W=t})}var N=t=>{let e=$('[data-form="submit-btn"]'),n=e.text(),a,s=0,c=[".","..","..."],d=()=>{let h=`Submitting${c[s]}`;e.text(h),s=(s+1)%c.length},p=()=>{e.addClass("disabled")},g=()=>{e.removeClass("disabled").text(n)};p();let u=setInterval(d,500);setTimeout(()=>{a=se(t),clearInterval(u),g(),a||t.find("input[type=submit]").trigger("click")},3e3)},W;$(document).ready(()=>{let t=typeof devEnv!="undefined"&&devEnv?"https://dev-api.owner.com":"https://api.owner.com",e=!!(typeof devEnv!="undefined"&&devEnv),n=_("userId");n||(n=F(),P("userId",n));let a=$(".main-wrapper"),s=$(".growth-form"),c=$(".growth-loading"),d=$(".growth-error");function p(){$(a).add(d).add(s).stop().fadeOut(500,function(){$(c).fadeIn(400)});let r=$(".growth-loading_step"),o=0;function l(){o<r.length-1&&r.eq(o).fadeOut(1e3,function(){o+=1,r.eq(o).fadeIn(1e3),setTimeout(l,4e3)})}r.hide().eq(o).show(),setTimeout(l,4e3)}function g(){$(a).add(c).add(s).stop().hide(),$(d).stop().fadeIn()}function u(r){return _(r).place_id}let h=async r=>{let o=await fetch(`${t}/generator/v1/generations`,{method:"POST",headers:{"Content-Type":"application/json","Access-Control-Allow-Origin":"*"},body:JSON.stringify({googleId:r})});return o.ok||console.error("POST request error:",o.status,await o.text()),await o.json()},q=async r=>await(await fetch(`${t}/generator/v1/generations/${r}`)).json(),C=new Set,H=r=>{let{status:o}=r;return C.has(o)||(console.log("Checking Generation Status:",r),C.add(o)),o},z=async r=>{try{let{id:o}=await h(r);if(!o)throw new Error("Invalid ID received from POST request");return new Promise((l,y)=>{let b=setInterval(async()=>{let U=await q(o),S=H(U);if(S!=="processing"){if(clearInterval(b),S!=="success")return y(new Error(S));l(U)}},1e3)})}catch(o){let l=o.message.includes("error")||o.message.includes("cancelled")?o.message:"";return{message:o.message,status:l}}};function v(r,o,l,y){let b=o;console.log(b),y&&(b.location.errorMessage=y),typeof FS!="undefined"&&FS&&FS.event(l,FS.identify(r,b))}function B(r,o){console.log("Success:",r);let l=r.redirectUri+(e?"":"&fsUserId="+n);v(n,{location:{requestBody:o},generatedUrl:l},"Website Generation Successful"),setTimeout(()=>{window.location.href=l},250)}function J(r,o){console.log("Error:",r),g(),v(n,{location:{requestBody:o}},"Website Generation Failed",respoonse)}function M(r,o){console.log("Error:",r.message),g(),v(n,{location:{requestBody:o}},"Website Generation Failed",r.message)}async function T(r){p();try{let o=await z(r);o&&o.status==="success"?B(o,r):J(o,r)}catch(o){M(o,r)}}let f=$("#growth-form"),I,K=()=>{v(n,{displayName:f.find($("input[name=first-name]")).val()+" "+f.find($("input[name=last-name]")).val(),email:f.find($("input[name=email]")).val(),firstName:f.find($("input[name=first-name]")).val(),lastName:f.find($("input[name=last-name]")).val(),phone:f.find($("input[name=cellphone]")).val()},"Enter Contact Information Successful");let r=u(w);T(r)};$("[data-form=generateBtn]").on("click",async function(){if(!k($("input[name=restaurant-name]")))return console.log("Validation Invalid");if(e){let l=u(w);T(l);return}let o=u(w);v(n,{location:{requestBody:o}},"Website Generation Started"),$(a).fadeOut(500,function(){$(s).fadeIn(400)})}),hbspt.forms.create({portalId:"6449395",formId:"f3807262-aed3-4b9c-93a3-247ad4c55e60",target:"#hbst-form",onFormReady:D,onFormSubmitted:K}),L().then(function(r){I=$(r)});let Q={name:["company","0-2/name"],international_phone_number:["phone","0-2/phone"],"restaurant-address":["address","0-2/address"],locality:["city","0-2/city"],administrative_area_level_1:["state","0-2/state"],postal_code:["zip","0-2/zip"],country:["country","0-2/country"],"first-name":"firstname","last-name":"lastname",cellphone:"mobilephone",email:"email","person-type":"lead_person_type",website:"website",place_id:"place_id",place_types:["place_types_contact","0-2/place_types"],rating:"place_rating",user_ratings_total:"user_ratings_total",hear:"how_did_you_hear_about_us",page_url:"last_pdf_download"};$("[data-form=submit-btn]").on("click",function(r){r.preventDefault();let o=!0;f.find(":input:visible, select").each(function(){let l=k($(this));o=o&&l}),o&&(O("page_url",window.location.pathname),G(f,I,Q),N(I))})});})();
