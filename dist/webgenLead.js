"use strict";(()=>{var w,Y=new Uint8Array(16);function E(){if(!w&&(w=typeof crypto!="undefined"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!w))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return w(Y)}var i=[];for(let e=0;e<256;++e)i.push((e+256).toString(16).slice(1));function U(e,t=0){return i[e[t+0]]+i[e[t+1]]+i[e[t+2]]+i[e[t+3]]+"-"+i[e[t+4]]+i[e[t+5]]+"-"+i[e[t+6]]+i[e[t+7]]+"-"+i[e[t+8]]+i[e[t+9]]+"-"+i[e[t+10]]+i[e[t+11]]+i[e[t+12]]+i[e[t+13]]+i[e[t+14]]+i[e[t+15]]}var Z=typeof crypto!="undefined"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),V={randomUUID:Z};function ee(e,t,n){if(V.randomUUID&&!t&&!e)return V.randomUUID();e=e||{};let a=e.random||(e.rng||E)();if(a[6]=a[6]&15|64,a[8]=a[8]&63|128,t){n=n||0;for(let s=0;s<16;++s)t[n+s]=a[s];return t}return U(a)}var k=ee;var O=(e,t)=>{let n=$(`input[name="${e}"]`);n.attr("type")==="checkbox"?n.prop("checked",t):n.val(t)};var x=e=>{let t=localStorage.getItem(e);try{return JSON.parse(t)}catch{return t}},F=(e,t)=>{let n=typeof t=="object"?JSON.stringify(t):t;localStorage.setItem(e,n)};var _="restaurant";var j=!1,T=e=>{let t=JSON.parse(localStorage.getItem("restaurant"));if(console.log(t),t&&Array.isArray(t.types)){let n=["bar","cafe","bakery","food","restaurant"];return!t.types.some(s=>n.includes(s))&&!j?(c(e),j=!0,!1):!0}return!1};function te(e){let n=/^[\w-\.]+@([\w-]+\.)+[\w-]{2,}$/.test($(e).val());return c($(e),!n,"Please fill correct email address."),n}function ne(e){let t=!0;return t=oe(e),t}function oe(e){let t=T(e);return t?c($(e),!1):c($(e),!0),t}function re(e){let t,n=$(e).siblings(".select2"),a=$(e).siblings(".nice-select");n?t=n.find(".select2-selection--single"):a?t=$(a):t=$(e);let s=!0;return $(e).val()===""?(validArr.push(selectVal),$(t).addClass("is-invalid"),s=!1):$(t).removeClass("is-invalid"),s}function ae(e){return $(e).is(":checked")?(c($(e),!1),!0):(c($(e),!0),!1)}function se(e){return c($(e),!1),!0}function ie(e){return $(e).attr("name")==="restaurant-name"&&c($(e),!0,"Please select a business location from the search results."),c($(e),!0),!1}var C=e=>{let t=e,n=!0;return $(t).prop("required")&&($(t).is('[type="checkbox"]')?n=ae(t):$(t).val()?$(t).is('[type="email"]')?n=te(t):$(t).attr("name")==="restaurant-name"?n=ne(t):$(t).is("select")?n=re(t):n=se(t):n=ie(t)),n?c($(t),!1):$(t).addClass("error"),n},c=(e,t,n)=>{let a=$(e).closest(".form-field-wrapper, [field-wrapper]").find(".field-validation, [field-validation]");$(e).closest(".form-field, [form-field]").toggleClass("error",t),a.toggle(t),n&&a.text(n)};var D=(e,s,n)=>{var a=$(e),s=$(s);Object.keys(n).forEach(function(d){var p=n[d],g=a.find('input[name="'+d.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&")+'"]');g.length===0&&(g=a.find('select[name="'+d.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&")+'"]'));var m=g.val();Array.isArray(p)||(p=[p]),p.forEach(function(h){var u=s.find("input[name="+h.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&")+"]");u.attr("type")==="checkbox"?String(m).toLowerCase()==="true"?u.prop("checked",!0):u.prop("checked",!1):ce(u,".hs-datepicker")?u.siblings("input[readonly]").val(m).change():u.val(m),["phone","mobilephone","email","pred_gmv"].includes(h)&&(u.get(0).focus({preventScrol:!0}),u.get(0).blur())})})},le=e=>{let t=!1;var n=e.find("input[name=mobilephone]").parent().siblings(".hs-error-msgs").find(".hs-error-msg").text(),a=$('input[name="cellphone"]').closest("[field-wrapper]").find("[field-validation]");n?(t=!0,a.text(n),a.show()):a.hide();var s=e.find("input[name=email]").closest(".hs-fieldtype-text").find(".hs-error-msgs").find(".hs-error-msg").text(),d=$('input[name="email"]').closest("[field-wrapper]").find("[field-validation]");return s?(d.text(s),d.show(),t=!0):d.hide(),t};function N(e){q(e)}function L(){return new Promise(function(e){q=e})}var W=e=>{let t=$('[data-form="submit-btn"]'),n,a=()=>{t.addClass("disabled")},s=()=>{t.removeClass("disabled")};G(!0),a(),setTimeout(()=>{n=le(e),s(),n?G(!1):e[0].submit()},3e3)};function G(e){let t=$("[form-loader]");e?(t.find('[data-animation-type="lottie"]').trigger("click"),t.fadeIn()):t.hide()}var q;function ce(e,t){let n=e[0]||e.get(0);if(!n)return!1;let{parentNode:a}=n;return a?Array.from(a.children).some(s=>s!==n&&s.matches(t)):!1}$(document).ready(()=>{let e=typeof devEnv!="undefined"&&devEnv?"https://dev-api.owner.com":"https://api.owner.com",t=!!(typeof devEnv!="undefined"&&devEnv),n=x("userId");n||(n=k(),F("userId",n));let a=$(".main-wrapper"),s=$(".growth-form"),d=$(".growth-loading"),p=$(".growth-error");function g(){$(a).add(p).add(s).stop().fadeOut(500,function(){$(d).fadeIn(400)});let r=$(".growth-loading_step"),o=0;function l(){o<r.length-1&&r.eq(o).fadeOut(1e3,function(){o+=1,r.eq(o).fadeIn(1e3),setTimeout(l,4e3)})}r.hide().eq(o).show(),setTimeout(l,4e3)}function m(){$(a).add(d).add(s).stop().hide(),$(p).stop().fadeIn()}function h(r){return x(r).place_id}let u=async r=>{let o=await fetch(`${e}/generator/v1/generations`,{method:"POST",headers:{"Content-Type":"application/json","Access-Control-Allow-Origin":"*"},body:JSON.stringify({googleId:r})});return o.ok||console.error("POST request error:",o.status,await o.text()),await o.json()},H=async r=>await(await fetch(`${e}/generator/v1/generations/${r}`)).json(),R=new Set,M=r=>{let{status:o}=r;return R.has(o)||(console.log("Checking Generation Status:",r),R.add(o)),o},z=async r=>{try{let{id:o}=await u(r);if(!o)throw new Error("Invalid ID received from POST request");return new Promise((l,y)=>{let b=setInterval(async()=>{let P=await H(o),S=M(P);if(S!=="processing"){if(clearInterval(b),S!=="success")return y(new Error(S));l(P)}},1e3)})}catch(o){let l=o.message.includes("error")||o.message.includes("cancelled")?o.message:"";return{message:o.message,status:l}}};function v(r,o,l,y){let b=o;console.log(b),y&&(b.location.errorMessage=y),typeof FS!="undefined"&&FS&&FS.event(l,FS.identify(r,b))}function B(r,o){console.log("Success:",r);let l=r.redirectUri+(t?"":"&fsUserId="+n);v(n,{location:{requestBody:o},generatedUrl:l},"Website Generation Successful"),setTimeout(()=>{window.location.href=l},250)}function J(r,o){console.log("Error:",r),m(),v(n,{location:{requestBody:o}},"Website Generation Failed",respoonse)}function K(r,o){console.log("Error:",r.message),m(),v(n,{location:{requestBody:o}},"Website Generation Failed",r.message)}async function A(r){g();try{let o=await z(r);o&&o.status==="success"?B(o,r):J(o,r)}catch(o){K(o,r)}}let f=$("#growth-form"),I,Q=()=>{v(n,{displayName:f.find($("input[name=first-name]")).val()+" "+f.find($("input[name=last-name]")).val(),email:f.find($("input[name=email]")).val(),firstName:f.find($("input[name=first-name]")).val(),lastName:f.find($("input[name=last-name]")).val(),phone:f.find($("input[name=cellphone]")).val()},"Enter Contact Information Successful");let r=h(_);A(r)};$("[data-form=generateBtn]").on("click",async function(){if(!C($("input[name=restaurant-name]")))return console.log("Validation Invalid");if(t){let l=h(_);A(l);return}let o=h(_);v(n,{location:{requestBody:o}},"Website Generation Started"),$(a).fadeOut(500,function(){$(s).fadeIn(400)})}),hbspt.forms.create({portalId:"6449395",formId:"f3807262-aed3-4b9c-93a3-247ad4c55e60",target:"#hbst-form",onFormReady:N,onFormSubmitted:Q}),L().then(function(r){I=$(r)});let X={name:["company","0-2/name"],international_phone_number:["phone","0-2/phone"],"restaurant-address":["address","0-2/address"],locality:["city","0-2/city"],administrative_area_level_1:["state","0-2/state"],postal_code:["zip","0-2/zip"],country:["country","0-2/country"],"first-name":"firstname","last-name":"lastname",cellphone:"mobilephone",email:"email","person-type":"lead_person_type",website:"website",place_id:"place_id",place_types:["place_types_contact","0-2/place_types"],rating:"place_rating",user_ratings_total:"user_ratings_total",hear:"how_did_you_hear_about_us",page_url:"last_pdf_download"};$("[data-form=submit-btn]").on("click",function(r){r.preventDefault();let o=!0;f.find(":input:visible, select").each(function(){let l=C($(this));o=o&&l}),o&&(O("page_url",window.location.pathname),D(f,I,X),W(I))})});})();
