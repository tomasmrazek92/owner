"use strict";(()=>{var N,ee=new Uint8Array(16);function C(){if(!N&&(N=typeof crypto!="undefined"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!N))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return N(ee)}var m=[];for(let e=0;e<256;++e)m.push((e+256).toString(16).slice(1));function L(e,t=0){return m[e[t+0]]+m[e[t+1]]+m[e[t+2]]+m[e[t+3]]+"-"+m[e[t+4]]+m[e[t+5]]+"-"+m[e[t+6]]+m[e[t+7]]+"-"+m[e[t+8]]+m[e[t+9]]+"-"+m[e[t+10]]+m[e[t+11]]+m[e[t+12]]+m[e[t+13]]+m[e[t+14]]+m[e[t+15]]}var te=typeof crypto!="undefined"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),T={randomUUID:te};function ne(e,t,n){if(T.randomUUID&&!t&&!e)return T.randomUUID();e=e||{};let o=e.random||(e.rng||C)();if(o[6]=o[6]&15|64,o[8]=o[8]&63|128,t){n=n||0;for(let s=0;s<16;++s)t[n+s]=o[s];return t}return L(o)}var j=ne;var d=(e,t)=>{let n=$(`input[name="${e}"]`);n.attr("type")==="checkbox"?n.prop("checked",t):n.val(t)},P=e=>$(`input[name="${e}"]`).val();var R=e=>{let t=localStorage.getItem(e);try{return JSON.parse(t)}catch{return t}};var z=!1,B=e=>{let t=JSON.parse(localStorage.getItem("restaurant"));if(console.log(t),t&&Array.isArray(t.types)){let n=["bar","cafe","bakery","food","restaurant"];return!t.types.some(s=>n.includes(s))&&!z?(y(e),z=!0,!1):!0}return!1};function oe(e){let n=/^[\w-\.]+@([\w-]+\.)+[\w-]{2,}$/.test($(e).val());return y($(e),!n,"Please fill correct email address."),n}function re(e){let t=!0;return t=ae(e),t}function ae(e){let t=B(e);return t?y($(e),!1):y($(e),!0),t}function se(e){let t,n=$(e).siblings(".select2"),o=$(e).siblings(".nice-select");n?t=n.find(".select2-selection--single"):o?t=$(o):t=$(e);let s=!0;return $(e).val()===""?(validArr.push(selectVal),$(t).addClass("is-invalid"),s=!1):$(t).removeClass("is-invalid"),s}function ie(e){return $(e).is(":checked")?(y($(e),!1),!0):(y($(e),!0),!1)}function le(e){return y($(e),!1),!0}function ce(e){return $(e).attr("name")==="restaurant-name"&&y($(e),!0,"Please select a business location from the search results."),y($(e),!0),!1}var D=e=>{let t=e,n=!0;return $(t).prop("required")&&($(t).is('[type="checkbox"]')?n=ie(t):$(t).val()?$(t).is('[type="email"]')?n=oe(t):$(t).attr("name")==="restaurant-name"?n=re(t):$(t).is("select")?n=se(t):n=le(t):n=ce(t)),n?y($(t),!1):$(t).addClass("error"),n},y=(e,t,n)=>{let o=$(e).closest(".form-field-wrapper, [field-wrapper]").find(".field-validation, [field-validation]");$(e).closest(".form-field, [form-field]").toggleClass("error",t),o.toggle(t),n&&o.text(n)};var J=(e,s,n)=>{var o=$(e),s=$(s);Object.keys(n).forEach(function(u){var S=n[u],p=o.find('input[name="'+u.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&")+'"]');p.length===0&&(p=o.find('select[name="'+u.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&")+'"]'));var x=p.val();Array.isArray(S)||(S=[S]),S.forEach(function(k){var _=s.find("input[name="+k.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&")+"]");_.attr("type")==="checkbox"?String(x).toLowerCase()==="true"?_.prop("checked",!0):_.prop("checked",!1):de(_,".hs-datepicker")?_.siblings("input[readonly]").val(x).change():_.val(x),["phone","mobilephone","email","pred_gmv"].includes(k)&&(_.get(0).focus({preventScrol:!0}),_.get(0).blur())})})},ue=e=>{let t=!1;var n=e.find("input[name=mobilephone]").parent().siblings(".hs-error-msgs").find(".hs-error-msg").text(),o=$('input[name="cellphone"]').closest("[field-wrapper]").find("[field-validation]");n?(t=!0,o.text(n),o.show()):o.hide();var s=e.find("input[name=email]").closest(".hs-fieldtype-text").find(".hs-error-msgs").find(".hs-error-msg").text(),u=$('input[name="email"]').closest("[field-wrapper]").find("[field-validation]");return s?(u.text(s),u.show(),t=!0):u.hide(),t};function G(e){W(e)}function H(){return new Promise(function(e){W=e})}var Q=e=>{let t=$('[data-form="submit-btn"]'),n,o=()=>{t.addClass("disabled")},s=()=>{t.removeClass("disabled")};V(!0),o(),setTimeout(()=>{n=ue(e),s(),n?V(!1):e[0].submit()},3e3)};function V(e){let t=$("[form-loader]");e?(t.find('[data-animation-type="lottie"]').trigger("click"),t.fadeIn()):t.hide()}var W;function de(e,t){let n=e[0]||e.get(0);if(!n)return!1;let{parentNode:o}=n;return o?Array.from(o.children).some(s=>s!==n&&s.matches(t)):!1}function me(){let e={},t=window.location.search;return t&&new URLSearchParams(t).forEach(function(o,s){let u=s.toLowerCase();e[u]=o}),e}function fe(e){Object.keys(e).length>0&&sessionStorage.setItem("utmWebParams",JSON.stringify(e))}function M(){let e=sessionStorage.getItem("utmWebParams");if(!e)return{};try{return JSON.parse(e)}catch(t){return console.error("Error parsing UTM params from sessionStorage:",t),{}}}function pe(){let e=me(),n={...M()};return Object.keys(e).length>0&&(Object.keys(e).forEach(o=>{n[o]=e[o]}),fe(n)),n}$(document).ready(function(){let e=pe();console.log("UTM Parameters:",e)});function _e(){if(!window.mixpanel||!window.mixpanel.__SV){var e=window.mixpanel=window.mixpanel||[];e._i=[],e.init=function(o,s,u){function S(b,g){var I=g.split(".");I.length==2&&(b=b[I[0]],g=I[1]),b[g]=function(){b.push([g].concat(Array.prototype.slice.call(arguments,0)))}}var p=e;typeof u!="undefined"?p=e[u]=[]:u="mixpanel",p.people=p.people||[],p.toString=function(b){var g="mixpanel";return u!=="mixpanel"&&(g+="."+u),b||(g+=" (stub)"),g},p.people.toString=function(){return p.toString(1)+".people (stub)"};for(var x="disable time_event track track_pageview track_links track_forms track_with_groups add_group set_group remove_group register register_once alias unregister identify name_tag set_config reset opt_in_tracking opt_out_tracking has_opted_in_tracking has_opted_out_tracking clear_opt_in_out_tracking start_batch_senders people.set people.set_once people.unset people.increment people.append people.union people.track_charge people.clear_charges people.delete_user people.remove".split(" "),k=0;k<x.length;k++)S(p,x[k]);var _="set set_once union unset remove delete".split(" ");p.get_group=function(){function b(v){g[v]=function(){call2_args=arguments,call2=[v].concat(Array.prototype.slice.call(call2_args,0)),p.push([I,call2])}}for(var g={},I=["get_group"].concat(Array.prototype.slice.call(arguments,0)),E=0;E<_.length;E++)b(_[E]);return g},e._i.push([o,s,u])},e.__SV=1.2;var t=document.createElement("script");t.type="text/javascript",t.async=!0,t.src=typeof MIXPANEL_CUSTOM_LIB_URL!="undefined"?MIXPANEL_CUSTOM_LIB_URL:document.location.protocol==="file:"&&"//cdn.mxpnl.com/libs/mixpanel-2-latest.min.js".match(/^\/\//)?"https://cdn.mxpnl.com/libs/mixpanel-2-latest.min.js":"//cdn.mxpnl.com/libs/mixpanel-2-latest.min.js";var n=document.getElementsByTagName("script")[0];n.parentNode.insertBefore(t,n)}}_e();mixpanel.init("8e3c791cba0b20f2bc5aa67d9fb2732a",{record_sessions_percent:100,record_mask_text_selector:""});$(document).ready(()=>{let e,t=typeof scheduleFlow!="undefined"&&scheduleFlow,n=$.cookie("webTempTatariUserId");n||(n=j(),$.cookie("webTempTatariUserId",n,{domain:".owner.com",path:"/"})),window.webUserId=n,typeof n!="undefined"&&n&&mixpanel.identify(n);function o(r){function a(){let{userAgent:U}=navigator,K=navigator.appName,{platform:Y}=navigator,{language:Z}=navigator;return{userAgent:U,browser:K,platform:Y,language:Z}}let l=a(),f=v.find($("input[name=first-name]")).val(),c=v.find($("input[name=last-name]")).val(),i=v.find($("input[name=name]")).val(),h=v.find($("input[name=cellphone]")).val(),F=v.find($("input[name=email]")).val(),w={displayName:f+" "+c,restaurantName:i,phone:h,email:F,firstName:f,lastName:c,...l};typeof mixpanel!="undefined"&&mixpanel&&(mixpanel.identify(n),mixpanel.people.set({$first_name:f,$last_name:c,$email:F,$phone:h,restaurantName:i,...l}),mixpanel.track(r,w))}function s(){var r="db833abde57f505b06b0e4b2bfe5e24f",a="2226621",l=document.createElement("img");l.src="https://ct.capterra.com/capterra_tracker.gif?vid="+a+"&vkey="+r,document.body.appendChild(l)}let u=()=>R("restaurant");function S(){return new Promise((r,a)=>{try{if(t){let l=u();e=void 0;let f=$('select[name="person-type"]').val()==="I'm a restaurant owner or manager",c=l.address_components.some(i=>i.short_name==="US");(!f||!c)&&(o("Submission Disqualified"),e=!1)}else e=!1;r()}catch(l){a(l)}})}function p(){let r=u(),a={name:r.name,address:r.formatted_address,website:r.website,email:"jonathan@owner.com",token:"AJXuyxPXgGF68NMv",sfdc_id:"None"},l;function f(c){return new Promise((i,h)=>{$.ajax({url:"https://owner-ops.net/business-info/",type:"POST",contentType:"application/json",dataType:"json",data:JSON.stringify(c),timeout:15e3,success:function(F){i(F)},error:function(F,w,U){w==="timeout"?(console.log("Error occurred:",U),d("execution_time_seconds",15),d("gmv_pred",0),i("")):(console.log("Error occurred:",U),i(""))}})})}return f(a).then(c=>(console.log(c),c[0])).catch(c=>(console.error("Error:",c),!1))}function x(r,a){console.log(r),console.log(a);let l=$("[demo-form] input"),f=["brizo_id","base_enrich_date","inbound_add_to_cadence","execution_time_seconds","auto_dq_flag","auto_dq_reason","gmv_pred"];a?l.each(function(){let c=$(this).attr("name");if(f.includes(c)&&r.hasOwnProperty(c)){var i=r[c];typeof i=="number"||!isNaN(i)&&!isNaN(parseFloat(i))?$(this).val(Number(i).toFixed(2)):$(this).val(i)}}):_(!1)}function k(){let r=!0;return v.find(":input:visible, select").each(function(){let a=D($(this));r=r&&a}),r}function _(r){console.log(r),d("base_enrich_date",new Date().toISOString().slice(0,10)),d("inbound_add_to_cadence","true"),r===!1&&(d("execution_time_seconds",0),d("auto_dq_flags","true")),r===!0&&(d("execution_time_seconds",0),d("auto_dq_reason","none"),d("auto_dq_flags","false"),d("self_service_scheduling_shown",!0))}function b(){d("page_url",t?"/demo-schedule":window.location.pathname),d("page_lang",$("html").attr("lang")),d("url",(()=>{var a=u();if(a&&a.url){var l=a.url;return l.split("cid=")[1]}return"none"})());function r(){let a=M();if(!a||Object.keys(a).length===0){console.log("No UTM parameters found in session storage");return}let l=$("input"),f={},c={};l.each(function(){let i=$(this).attr("name");if(i)if(i.startsWith("0-2/")){let h=i.substring(4);c[h]=$(this)}else f[i]=$(this)}),Object.keys(a).forEach(i=>{let h=a[i];h&&(f[i]&&(f[i].val(h),console.log(`Set regular input ${i} = ${h}`)),c[i]&&(c[i].val(h),console.log(`Set prefixed input 0-2/${i} = ${h}`)))})}r(),d("web_user_id",n)}async function g(){let r=k();if(console.log(r),r){V(!0);try{if(await S(),typeof e!="boolean"){let a=await p(),l=a.auto_dq_flag;d("self_service_enrichment_api_used",!0),typeof l=="string"?(e=a.auto_dq_flag!=="True",x(a,!0),e&&d("self_service_scheduling_shown",!0)):(e=!1,x(a,!1))}else _(e)}catch(a){e=!1,console.log("Qualification check or call failed:",a)}b(),J(v,O,X),o("Form Button Clicked"),Q(O)}}function I(){g()}let E=()=>{let r=$(".demo-form_success"),a=!window.location.href.includes("/blog/")&&!window.location.href.includes("/resources/")&&!window.location.href.includes("/downloads/"),l=v.attr("data-custom-redirect"),f=t&&e&&l==="";if(V(!1),v.hide(),f){let h=function(F){var w=$.extend({},c,F);$(w.selector).html('<div class="meetings-iframe-container" data-src="'+w.link+`?embed=true&firstName=${w.fName}&lastName=${w.lName}&email=${w.email}&company=${w.company}"></div>`),$.getScript("https://static.hsappstatic.net/MeetingsEmbed/ex/MeetingsEmbedCode.js").done(function(){r.show()})};var i=h,c={link:"https://meetings.hubspot.com/jonathan-shenkman/self-scheduling",selector:".demo-form_success",email:P("email"),fName:P("first-name"),lName:P("last-name"),company:P("name")};h()}l!==""?(r.show(),window.location.href=l):a&&!f?(r.show(),window.location.href="https://www.owner.com/funnel-demo-requested"):r.show()},v=$("[demo-form]"),O,A="f3807262-aed3-4b9c-93a3-247ad4c55e60",q=window.location.href;q.indexOf("/resources/")!==-1&&(A="66b9776c-c640-4b5a-8807-439a721001ff"),q.indexOf("refer")!==-1&&(A="969fbdc3-b662-4428-a208-c78b8f20efa6"),hbspt.forms.create({portalId:"6449395",formId:A,target:"#hbst-form",onFormReady:G,onFormSubmit:function(){console.log("Submit"),o("Form Submission Attempt")},onFormSubmitted:()=>{o("Form Submission Sent"),s(),setTimeout(()=>{E()},200)}}),H().then(function(r){O=$(r)});let X={name:["company","0-2/name"],international_phone_number:["phone","0-2/phone"],"restaurant-address":["address","0-2/address"],locality:["city","0-2/city"],administrative_area_level_1:["state","0-2/state"],postal_code:["zip","0-2/zip"],country:["country","0-2/country"],"first-name":"firstname","last-name":"lastname",cellphone:"mobilephone",email:"email","person-type":"lead_person_type",website:"website",place_id:"place_id",url:"place_cid",place_types:["place_types_contact","0-2/place_types"],rating:"place_rating",user_ratings_total:"user_ratings_total","number-of-locations":"of_locations_number",hear:"how_did_you_hear_about_us",page_url:"last_pdf_download",page_lang:"page_lang",brizo_id:["brizo_id","0-2/brizo_id_account"],base_enrich_date:["auto_enrich_date","0-2/auto_enrich_date_company"],inbound_add_to_cadence:"inbound_add_to_cadence",execution_time_seconds:"auto_enrich_time",auto_dq_flag:"auto_dq_static",auto_dq_reason:["auto_dq_reason","0-2/auto_dq_reason_company"],gmv_pred:["pred_gmv","0-2/pred_gmv_company"],referrer_s_phone_number:"referrer_s_phone_number"};$("[data-form=submit-btn]").on("click",I),$('select[name="person-type"]').on("change",function(){$(this).val()==="I'm a restaurant owner or manager"?$("#locations-wrap").show():$("#locations-wrap").hide()}),$("[data-cleave-phone]").each(function(){new Cleave($(this),{numericOnly:!0,blocks:[0,3,3,4,10],delimiters:["(",") ","-"],delimiterLazyShow:!0})})});})();
