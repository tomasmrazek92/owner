"use strict";(()=>{var T=(e,s)=>{let o=$(`input[name="${e}"]`);o.attr("type")==="checkbox"?o.prop("checked",s):o.val(s)},de=e=>$(`input[name="${e}"]`).val(),Oe=()=>{$('select[name="person-type"]').on("change",function(){$(this).val()==="I'm a restaurant owner or manager"?$("#locations-wrap").css("display","flex"):$("#locations-wrap").hide()})};var Te=e=>{let s=localStorage.getItem(e);try{return JSON.parse(s)}catch{return s}};var Ne=!1,De=e=>{let s=JSON.parse(localStorage.getItem("restaurant"));if(console.log(s),s&&Array.isArray(s.types)){let o=["bar","cafe","bakery","food","restaurant"];return!s.types.some(a=>o.includes(a))&&!Ne?(V(e),Ne=!0,!1):!0}return!1};function He(e){let o=/^[\w-\.]+@([\w-]+\.)+[\w-]{2,}$/.test($(e).val());return V($(e),!o,"Please fill correct email address."),o}function Je(e){let s=!0;return s=Ke(e),s}function Ke(e){let s=De(e);return s?V($(e),!1):V($(e),!0),s}function Qe(e){let s,o=$(e).siblings(".select2"),i=$(e).siblings(".nice-select");o?s=o.find(".select2-selection--single"):i?s=$(i):s=$(e);let a=!0;return $(e).val()===""?(validArr.push(selectVal),$(s).addClass("is-invalid"),a=!1):$(s).removeClass("is-invalid"),a}function We(e){return $(e).is(":checked")?(V($(e),!1),!0):(V($(e),!0),!1)}function Xe(e){var s=$(e),o=s.find('input[type="checkbox"]');return console.log(o.filter(":checked").length===0),o.filter(":checked").length===0?(V(s,!0),!1):(V(s,!1),!0)}function Ye(e){let s=$(e).attr("name"),o=$(`input[name="${s}"]`);return o.is(":checked")?($(o).closest(".radio-group").removeClass("is-invalid"),V($(o[0]),!1),!0):($(o).closest(".radio-group").addClass("is-invalid"),V($(o[0]),!0,"Please select an option."),!1)}function Ze(e){return V($(e),!1),!0}function et(e){return $(e).attr("name")==="restaurant-name"&&V($(e),!0,"Please select a business location from the search results."),V($(e),!0),!1}var ke=e=>{let s=e,o=!0;return $(s).removeClass("error"),$(s).removeClass("is-valid"),($(s).prop("required")||$(s).closest('[data-form="check-checkbox"]').length)&&($(s).closest('[data-form="check-checkbox"]').length?o=Xe($(s).closest("[field-wrapper]")):$(s).is('[type="checkbox"]')?o=We(s):$(s).is('[type="radio"]')?o=Ye(s):$(s).val()?$(s).is('[type="email"]')?o=He(s):$(s).attr("name")==="restaurant-name"?o=Je(s):$(s).is("select")?o=Qe(s):o=Ze(s):o=et(s)),o?(V($(s),!1),$(s).addClass("is-valid")):$(s).addClass("error"),o},V=(e,s,o)=>{let i=$(e).closest(".form-field-wrapper, [field-wrapper]").find(".field-validation, [field-validation]");$(e).closest(".form-field, [form-field]").toggleClass("error",s),i.toggle(s),o&&i.text(o)};var tt={name:["company","0-2/name"],international_phone_number:["phone","0-2/phone"],"restaurant-address":["address","0-2/address"],locality:["city","0-2/city"],administrative_area_level_1:["state","0-2/state"],postal_code:["zip","0-2/zip"],country:["country","0-2/country"],"first-name":"firstname","last-name":"lastname",cellphone:"mobilephone",email:"email","person-type":"lead_person_type",website:"website",place_id:"place_id",url:"place_cid",place_types:["place_types_contact","0-2/place_types"],rating:"place_rating",user_ratings_total:"user_ratings_total","number-of-locations":"of_locations_number",hear_input:"how_did_you_hear_about_us",page_url:"last_pdf_download",page_lang:"page_lang",brizo_id:["brizo_id","0-2/brizo_id_account"],base_enrich_date:["auto_enrich_date","0-2/auto_enrich_date_company"],inbound_add_to_cadence:"inbound_add_to_cadence",execution_time_seconds:"auto_enrich_time",auto_dq_flag:"auto_dq_static",auto_dq_reason:["auto_dq_reason","0-2/auto_dq_reason_company"],gmv_pred:["pred_gmv","0-2/pred_gmv_company"],brand_emrr:"default_brand_emrr",sms_opt_in:"sms_opt_in",referrer_s_name:"referrer_s_name",referrer_s_last_name:"referrer_s_last_name",referrer_s_phone_number:"referrer_s_phone_number",referrer_s_email:"referrer_s_email"},st=(e,i)=>{var o=$(e),i=$(i),a=tt;Object.keys(a).forEach(function(_){var S=a[_],b=o.find('input[name="'+_.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&")+'"]');b.length===0&&(b=o.find('select[name="'+_.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&")+'"]'));var P=b.val();b.attr("type")==="checkbox"&&(P=b.is(":checked")?"true":"false"),Array.isArray(S)||(S=[S]),S.forEach(function(E){var f=i.find("input[name="+E.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&")+"]");if(f.attr("type")==="checkbox"?f.prop("checked",String(P).toLowerCase()==="true"):nt(f,".hs-datepicker")?f.siblings("input[readonly]").val(P).change():f.val(P),["phone","mobilephone","email","pred_gmv"].includes(E)){let D=f.get(0);D&&(D.focus({preventScroll:!0}),D.blur())}})})},Le=e=>{let s=!1;var o=e.find("input[name=mobilephone]").parent().siblings(".hs-error-msgs").find(".hs-error-msg").text(),i=$('input[name="cellphone"]').closest("[field-wrapper]").find("[field-validation]");o?(s=!0,i.text(o),i.show()):i.hide();var a=e.find("input[name=email]").closest(".hs-fieldtype-text").find(".hs-error-msgs").find(".hs-error-msg").text(),_=$('input[name="email"]').closest("[field-wrapper]").find("[field-validation]");return a?(_.text(a),_.show(),s=!0,e.find("input[name=email]").val("1")):_.hide(),s};function Me(e){Ue(e)}function je(){return new Promise(function(e){Ue=e})}var qe=(e,s,o)=>(st(e,s),new Promise(i=>{let a;o?setTimeout(()=>{a=Le(s),i(!a)},3e3):(a=Le(s),i(!a))}));function fe(e){let s=$("[form-loader]");e?(s.find('[data-animation-type="lottie"]').trigger("click"),s.fadeIn()):s.hide()}var Ue;function nt(e,s){let o=e[0]||e.get(0);if(!o)return!1;let{parentNode:i}=o;return i?Array.from(i.children).some(a=>a!==o&&a.matches(s)):!1}function ot(){let e={},s=window.location.search;return s&&new URLSearchParams(s).forEach(function(i,a){let _=a.toLowerCase();e[_]=i}),e}function rt(e){Object.keys(e).length>0&&sessionStorage.setItem("utmWebParams",JSON.stringify(e))}function Pe(){let e=sessionStorage.getItem("utmWebParams");if(!e)return{};try{return JSON.parse(e)}catch(s){return console.error("Error parsing UTM params from sessionStorage:",s),{}}}function it(){let e=ot(),o={...Pe()};return Object.keys(e).length>0&&(Object.keys(e).forEach(i=>{o[i]=e[i]}),rt(o)),o}$(document).ready(function(){let e=it();console.log("UTM Parameters:",e)});var se=(()=>{let e=[],s=0,o=0,i=0,a=!0,_=0,S=(b,P,E,f,D,L)=>{(localStorage.getItem("isStagingForMe")==="true"||window.location.origin.includes("webflow.io"))&&(b==="event"?(console.log(`[Event #${P}]: ${E}: ${f.toFixed(2)}ms (active time: ${D.toFixed(2)}ms)`),L&&Object.keys(L).length>0&&console.log("  Data:",L)):b==="pause"?console.log("[Timer]: Paused"):b==="resume"?console.log("[Timer]: Resumed"):b==="table"&&console.table(e))};return{log:(b,P)=>{let E=performance.now();if(!s){s=E,o=1,e.push({label:b,step:0,total:0,index:o,data:P}),S("event",o,b,0,0,P);return}o++;let f=E-s;i+=f,e.push({label:b,step:f,total:i,index:o,data:P}),s=E,S("event",o,b,f,i,P)},pause:()=>{a||(a=!0,_=performance.now(),S("pause"))},resume:()=>{a&&(a=!1,s=performance.now(),_=0,S("resume"))},dump:()=>(S("table"),e),reset:()=>{e.length=0,s=0,o=0,i=0,a=!0,_=0},getLogs:()=>e}})();function at(e,s){let o=document.createElement("script");o.src=e,o.async=!0,document.head.appendChild(o),o.onload=function(){s&&s()},o.onerror=function(){console.error("Failed to load script:",e)}}$(document).ready(()=>{at("https://import-cdn.default.com/sdk.js");let e=window.location.href.indexOf("/dev")!==-1,s=window.location.href,o=s.indexOf("refer")!==-1||s.indexOf("benekeith")!==-1,i=$("[demo-form]"),a,_=i.attr("data-show-schedule")==="true",S=!1,b=$.cookie("webTempTatariUserId");b&&(window.webUserId=b);function P(){if(e)return;let t=i.attr("data-custom-redirect"),n=de("place_id"),r=de("name"),m=de("auto_dq_flag")==="False"?"aql":"non-aql",c=`${t||"/demo-thank-you-grader"}?placeid=${n}&resname=${r}&prosresult=${m}&livebooked=${S}`;f("Form - Success - Redirect",{redirectUrl:c}),window.location.href=c}let E=new Map;function f(t,n,r){r=r||{},n=n||{};let l=r.dumpTimer||!1,m=r.consoleLog!==!1,u=r.skipFormData||!1,c=t.toLowerCase().includes("start"),v=t.toLowerCase().includes("end");if(c){let d=r.processName||t.split(" - ")[0],w=performance.now();if(!E.has(d))E.set(d,{lastTime:w,cumulativeTime:0,isPaused:!1});else{let p=E.get(d);p.isPaused&&(p.lastTime=w,p.isPaused=!1)}se.resume()}let g=null;if(v){let d=r.processName||t.split(" - ")[0],w=performance.now(),p=E.get(d);if(p){p.isPaused||(p.cumulativeTime+=w-p.lastTime);let x=p.cumulativeTime;g=`[Process Complete]: "${d}" took ${x.toFixed(2)}ms (active only)`,E.delete(d)}else g=`[Process Warning]: End called for unknown process "${d}"`;E.size===0&&se.pause()}m&&se.log(t,n);function C(){let{userAgent:d}=navigator,w=navigator.appName,{platform:p}=navigator,{language:x}=navigator;return{userAgent:d,browser:w,platform:p,language:x}}function N(d){let w={};for(let p in d)if(d.hasOwnProperty(p)){let x=d[p];if(typeof x=="string"&&x.length>0){let q=x.trim().charAt(0);if(q==="["||q==="{")try{w[p]=JSON.parse(x)}catch{w[p]=x}else w[p]=x}else w[p]=x}return w}function A(d,w=""){let p={};for(let x in d){if(!d.hasOwnProperty(x))continue;let q=d[x],j=w?`${w}_${x}`:x;q==null?p[j]=q:Array.isArray(q)?q.forEach((Q,W)=>{typeof Q=="object"&&Q!==null?Object.assign(p,A(Q,`${j}_${W}`)):p[`${j}_${W}`]=Q}):typeof q=="object"?Object.assign(p,A(q,j)):p[j]=q}return p}let I=C(),h=N(n),k={...I,...h};if(!u&&typeof i!="undefined"){let d=i.find($("input[name=first-name]")).val(),w=i.find($("input[name=last-name]")).val(),p=i.find($("input[name=name]")).val(),x=i.find($("input[name=cellphone]")).val(),q=i.find($("input[name=email]")).val();k={...k,displayName:d+" "+w,restaurantName:p,phone:x,email:q,firstName:d,lastName:w}}let R=se.getLogs();if(R.length>0){let d=R[R.length-1];if(k.stepActiveTime=d.step,k.totalActiveTime=d.total,k.eventIndex=d.index,E.size>0){let[w,p]=E.entries().next().value,x=performance.now(),q=p.cumulativeTime;p.isPaused||(q+=x-p.lastTime),k.processTime=q,k.processName=w}}let y=A(k);if(typeof mixpanel!="undefined"&&mixpanel){if(typeof b!="undefined"&&b&&mixpanel.identify(b),!u&&typeof i!="undefined"){let d=y.firstName,w=y.lastName,p=y.email,x=y.phone,q=y.restaurantName;(p||x)&&mixpanel.people.set({$first_name:d,$last_name:w,$email:p,$phone:x,restaurantName:q,...I})}e||mixpanel.track(t,y),window.dataLayer=window.dataLayer||[],window.dataLayer.push({event:t,...y})}if(l){if(typeof mixpanel!="undefined"&&mixpanel&&R.length>0){let d={...I,parentEvent:t,totalActiveTime:R[R.length-1].total};R.forEach((w,p)=>{let x=w.label||`step_${p+1}`;d[x]=w.step}),mixpanel.track("Full Timer Log",d),window.dataLayer.push({event:"Full Timer Log",...d})}se.dump(),se.reset()}}function D(){var t="db833abde57f505b06b0e4b2bfe5e24f",n="2226621",r=document.createElement("img");r.src="https://ct.capterra.com/capterra_tracker.gif?vid="+n+"&vkey="+t,document.body.appendChild(r)}let L=()=>{let t=Te("restaurant");return f("Form Init - GetRestaurant",{restaurant:t}),t};function me(){f("Form Qualification - Start");let t,n;return new Promise((r,l)=>{try{if(_){let m=L();a=void 0;let u=$('select[name="person-type"]');t=u.length?u.val()==="I'm a restaurant owner or manager":!0,n=m.address_components.some(c=>c.short_name==="US"),(!t||!n)&&(a=!1)}else f("Form Qualification - End",{status:"No Schedule Flow"}),a=!1;f("Form Qualification - End",{status:a===void 0||a===!0?"Success - Qualified for Enrichment":"Submission InstaDisqualified",isOwner:t,isUS:n}),r()}catch(m){f("Form Qualification - End",{status:"Flow Error",errorMessage:m.message,errorType:m.name}),l(m)}})}function pe(){let t=L(),n={name:t.name,address:t.formatted_address,website:t.website,email:"jonathan@owner.com",token:"AJXuyxPXgGF68NMv",sfdc_id:"None"};function r(l){return new Promise((m,u)=>{f("Enrichment API - Start"),$.ajax({url:"https://owner-ops.net/evaluate-business/",type:"POST",contentType:"application/json",dataType:"json",data:JSON.stringify(l),timeout:4e4,success:function(c){f("Enrichment API - End",{status:"Completed",response:c}),m(c)},error:function(c,v,g){f("Enrichment API - End",{error:g,status:c.status,response:c.responseJSON||c.responseText}),v==="timeout"&&(T("execution_time_seconds",40),T("gmv_pred",0)),m(null)}})})}return r(n).then(l=>l&&l[0]?l[0]:!1)}function ne(t,n){let r=$("[demo-form] input"),l=["brizo_id","base_enrich_date","inbound_add_to_cadence","execution_time_seconds","auto_dq_flag","auto_dq_reason","gmv_pred"];if(n){let u=function(){let c=t.gmv_pred,v=parseInt(de("number-of-locations")),g;v===1?g=499+.05*c:g=599+.05*c*v+299*(v-1),T("brand_emrr",g)};var m=u;r.each(function(){let c=$(this).attr("name");if(l.includes(c)&&t.hasOwnProperty(c)){var v=t[c];typeof v=="string"&&v.match(/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}/)?$(this).val(v.split("T")[0]):typeof v=="number"||!isNaN(v)&&!isNaN(parseFloat(v))?$(this).val(Number(v).toFixed(2)):$(this).val(v)}}),u()}else re(!1)}function oe(t){f("Form Internal Validation - Start");let n=!0,r=t.find(".nice-select:visible").map(function(){return $(this).closest("[field-wrapper]").find("select")}).get();return t.find(":input:visible").add('[data-form="check-checkbox"]:visible :input[type="checkbox"]').not("select").add(r).each(function(){let l=ke($(this));n=n&&l}),f("Form Internal Validation - End",{status:n}),n}function re(t){T("base_enrich_date",new Date().toISOString().slice(0,10)),T("inbound_add_to_cadence","true"),t===!1&&(T("execution_time_seconds",0),T("auto_dq_flags","true")),t===!0&&(T("execution_time_seconds",0),T("auto_dq_reason","none"),T("auto_dq_flags","false"),T("self_service_scheduling_shown",!0))}function he(){T("page_url",window.location.href.includes("benekeith")?"/benekeith":window.location.pathname==="/refer"?"/referrals":_?"/demo-schedule":window.location.pathname),T("most_recent_conversion_page_url",window.location.href),T("page_lang",$("html").attr("lang")),T("url",(()=>{var n=L();if(n&&n.url){var r=n.url;return r.split("cid=")[1]}return"none"})());function t(){let n=Pe();if(!n||Object.keys(n).length===0)return;let r=$("input"),l={},m={};r.each(function(){let u=$(this).attr("name");if(u)if(u.startsWith("0-2/")){let c=u.substring(4);m[c]=$(this)}else l[u]=$(this)}),Object.keys(n).forEach(u=>{let c=n[u];c&&(l[u]&&l[u].val(c),m[u]&&m[u].val(c))})}t(),T("web_user_id",b)}function X(t){let n;if($('[data-form="submit-btn"]').is(":visible")?n=$('[data-form="submit-btn"]'):n=$('[data-form="next-btn"]'),t){let r=n.text();n.addClass("disabled"),n.attr("data-original-text",r),n.children("div:first-child").text("Processing")}else{let r=n.attr("data-original-text");n.removeClass("disabled"),n.children("div:first-child").text(r)}}let z=null,Y=!1,ie="";async function ge(){if(X(!0),oe(i)){fe(!0),z&&await z;try{await ae()}catch{a=!1}he(),X(!1),f("Form Mirror - Hubspot - Start");let n=await qe(i,U);return f("Form Mirror - Hubspot - End",{status:n}),n}return X(!1),!1}async function ve(){try{if(await me(),typeof a!="boolean"){let t=await pe(),n=t.auto_dq_flag;T("self_service_enrichment_api_used",!0),typeof n=="string"?(a=t.auto_dq_flag!=="True",ne(t,!0),a&&T("self_service_scheduling_shown",!0)):(a=!1,ne(t,!1))}else re(a)}catch{a=!1}}function ae(){var l;let t=$('select[name="person-type"]').val()||"",n=((l=$('input[name="restaurant-name"]').val())==null?void 0:l.trim())||"";if(!t||n.length<2)return z||Promise.resolve();let r=t+"|"+n;return r===ie?z||Promise.resolve():(ie=r,z?(Y=!0,z):le())}function le(){return Y=!1,z=ve().catch(()=>{}).finally(()=>{z=null,Y&&le()}),z}async function we(){f("Submit Attempt - Start"),await ge()?(G=K(),f("Submit Attempt - End",{status:"success"}),f("HS Form - Submission - Start"),U[0].submit()):(f("Submit Attempt - End",{status:"validation failed"}),fe(!1))}let be=()=>{let t=$(".demo-form_success"),n=!window.location.href.includes("/blog/")&&!window.location.href.includes("/resources/")&&!window.location.href.includes("/downloads/"),r=_&&a;if(i.hide(),fe(!1),r)if(window.defaultSchedulerUrl){let u=function(){var c=new URL(l.link);$(l.selector).html('<div class="meetings-iframe-container" style="width: 100%; height: 900px;"><iframe src="'+c.toString()+'" width="100%" height="100%" frameborder="0" allow="camera; microphone; autoplay; encrypted-media; fullscreen; display-capture"></iframe></div>'),t.css("background-color","white"),t.show(),$(document).trigger("DefaultSchedulerDisplayed",{url:c.toString()});let v=$(".demo-form-box").first(),g=$(t).closest("section"),C=v.length?v:g;$("html, body").animate({scrollTop:C.offset().top-160},600)};var m=u,l={link:window.defaultSchedulerUrl,selector:".demo-form_success-box"};f("Default Scheduler - Open"),t.attr("data-form-open")==="on-click"?$('[data-form-btn="open-scheduler"]').on("click",function(){u()}):u()}else t.show();f("Form - Success Submission",{},{dumpTimer:!0}),n&&!r?(t.show(),P()):t.show()},U,Z="f3807262-aed3-4b9c-93a3-247ad4c55e60",ye="6449395";s.indexOf("/resources/")!==-1&&(Z="66b9776c-c640-4b5a-8807-439a721001ff"),o&&(Z="969fbdc3-b662-4428-a208-c78b8f20efa6");let G=null,J=!1,ee,ce;hbspt.forms.create({portalId:ye,formId:Z,target:"#hbst-form",onFormReady:Me,onFormSubmit:()=>{ce=new Promise(n=>{ee=n});let t=new Promise(n=>{setTimeout(()=>n("timeout"),2e4)});Promise.race([ce,t]).then(n=>{n==="timeout"&&(f("HS Form - Submission - End",{status:"timeout"}),fe(!1))})},onFormSubmitted:async t=>{ee&&ee("success"),f("HS Form - Submission - End",{status:"success"}),M(),await ue(),setTimeout(()=>{be()},500),D()}}),je().then(function(t){f("HSform - Ready"),U=$(t)}),$("[data-form=submit-btn]").on("click",we),Oe(),$("[data-cleave-phone]").each(function(){new Cleave($(this),{numericOnly:!0,blocks:[0,3,3,4,10],delimiters:["(",") ","-"],delimiterLazyShow:!0})});function _e(t){let n=$(t),r=n.val().replace(/\D/g,"");if(r!==""){let l=parseInt(r);l>999?n.val("999"):l<1?n.val("1"):n.val(r)}return r!==""&&parseInt(r)>=1&&parseInt(r)<=999}$("#number-of-locations").on("input",function(){_e(this)}),$("#number-of-locations").on("blur",function(){let t=$(this);(t.val()===""||parseInt(t.val())<1)&&t.val("1")});function $e(){let t=$('select[name="hear"]'),n=t.siblings(".nice-select"),r=$('[data-form="other-input"]'),l=$('[data-form="other-input-close"]'),m=$('input[name="hear_input"]');t.on("change",function(){$(this).val()==="Other"&&r.length&&(n.hide(),r.css("display","flex"),r.find("input").trigger("focus"))}),l.on("click",function(){n.show(),r.hide(),r.find("input").val(""),m.val(""),n.find("ul [data-value]:first-child").click(),n.find(".current").attr("style","")}),r.find("input").on("input",function(){t.val()==="Other"&&m.val($(this).val())}),t.on("change",function(){$(this).val()!=="Other"&&m.val($(this).val())})}$e(),$('[data-form="reload-btn"]').on("click",function(){location.reload()}),i.find('input[name="email"]').on("change",function(){$(this).val().trim()!==""&&qe(i,U,!0)}),i.find('input[name="cellphone"]').on("change",function(){$(this).val().trim()!==""&&qe(i,U,!0)});function H(){let t=$('select[name="person-type"]'),n=$('input[name="restaurant-name"]');function r(){var m=t.val().trim()!=="",u=n.val().trim()!=="";if(m&&u){var c=ke(t),v=ke(n);c&&v&&ae()}}t.on("change",function(){r()});function l(){window.googleAutocomplete?window.googleAutocomplete.addListener("place_changed",function(){r()}):setTimeout(l,100)}l()}H();function K(){f("Default Scrapper - Start");let t=$(U),n=[],r={},l={},m=["default_brand_emrr","pred_gmv","pred_gmv_company"];return t.find("input, textarea, select").each(function(){let u=$(this),c=u.attr("type"),v=u.prop("tagName").toLowerCase(),g=u.attr("name");g&&g.includes("/")&&(g=g.split("/").pop());let C=g,N=$(`label[for="${C}"]`).text().trim()||u.closest(".field, .hs-form-field").find("label").text().trim()||u.attr("placeholder")||g;if(!u.attr("name")||c==="submit"||!N||!C)return;let A="input",I=[],h=u.val()||"";if(c==="checkbox")h=u.is(":checked")?"true":"false",A="checkbox",I=[h];else if(c==="radio"){if(!u.is(":checked"))return;h=u.val().toString(),A="radio",I=[h]}else{if(!h.trim()&&c!=="hidden")return;if(c==="email"){A="email";let y={id:"email",name:"email",label:"email",type:A};I.length&&(y.options=I),n.push(y),r.email=h,l.email=y;return}else c==="tel"||c==="phone"?A="tel":v==="textarea"?A="textarea":v==="select"&&(A="select",u.find("option").each(function(){let y=$(this).val();y&&!$(this).is(":disabled")&&I.push(y.toString())}))}if(l[N]){let y=l[N];if(I.length&&I.forEach(d=>{let w=d.toString();y.options||(y.options=[]),y.options.includes(w)||y.options.push(w)}),A==="checkbox"){let d=r[y.id];r[y.id]=d?Array.isArray(d)?[...d,h]:[d,h]:[h]}else{let d=m.includes(y.id)&&h!==""?parseFloat(h):h;r[y.id]=d}return}let k={id:C,name:g,label:N,type:A};I.length&&(k.options=I),n.push(k);let R=m.includes(C)&&h!==""?parseFloat(h):h;r[C]=R,l[N]=k}),f("Default Scrapper - End",{questions:n,responses:r}),{questions:n,responses:r}}function M(){if(f("DefaultSDK - Submission Attempt - Start"),!G){f("DefaultSDK - Submission Attempt - End",{status:"No form data"});return}let t=Object.keys(G.responses).find(m=>m.includes("email")),n=t?G.responses[t]:null;if(!n){f("DefaultSDK - Submission Attempt - End",{status:"No email found"}),window.defaultSchedulerUrl=null,J=!0;return}let r={form_id:o?348215:593374,team_id:514,email:n,responses:G.responses,questions:G.questions},l={autoSchedulerDisplay:!1,onSuccess:m=>{f("DefaultSDK - Submission Attempt - End",{status:"Success",response:m}),window.defaultSchedulerUrl=m?m.body.stepDetails.url:null,J=!0},onError:m=>{f("DefaultSDK - Submission Attempt - End",{status:m}),window.defaultSchedulerUrl=null,J=!0},onSchedulerClosed:m=>{f("Default Scheduler - Closed"),P()},onMeetingBooked:m=>{S=!0,$("[data-form-success]").css("display","flex"),setTimeout(()=>{let u=5,c=$("[data-redirect-timer]");c.text(u);let v=setInterval(()=>{u--,c.text(u),u===0&&(clearInterval(v),P())},1e3)},0),f("Default Scheduler - Meeting booked!",m)}};window.DefaultSDK.submit(r,l)}function ue(t=6e4){return new Promise(n=>{let r=Date.now(),l=()=>{J||Date.now()-r>t?n():setTimeout(l,100)};l()})}function Ee(){let t={"2-steps":{0:["restaurant","role","locations"],1:["email","first-name","last-name","cellphone","hear","sms"]},"quiz-grader":{0:["restaurant"],1:["goals"],2:["most-important"],3:["first-name","last-name","role","locations"],4:["email","cellphone"]}},n=$("[data-form-multistep]");if(!n.length)return;let r=n.attr("data-form-multistep"),l=document.querySelector('[data-form="back-btn"]'),m=document.querySelector('[data-form="next-btn"]'),u=document.querySelector('[data-form="submit-btn"]'),c=t[r],v=Object.keys(c).length,g=0;function C(N="next"){let A=c[g];$("[field-wrapper]").hide(),A.forEach((h,k)=>{$(`[field-wrapper="${h}"]`).css("order",k),h!=="locations"&&$(`[field-wrapper="${h}"]`).show()}),$("[data-multistep-headline]").each(function(){let h=$(this).attr("data-multistep-headline");$(this).toggle(h==g)}),$('[data-form="step-counter"]').text(`Step ${g+1} of ${v}`);function I(h){let k=$(".quiz-progressbar-wrapper-2");if(k.length){k.css("display",h>=1?"flex":"none");let R=$(".quiz-progressbar-wrapper-2 .quiz-single-progress").length,y=(h+1)/R*100;$(".stats-svg-2 .progress").css("stroke-dashoffset",`calc(188.5 - (188.5 * ${y}) / 100)`),$(".circular-progress-point").text(`${h+1} of ${R}`),$(window).width()<992?$(".quiz-progressbar-wrapper-2 .quiz-single-progress").each(function(d){$(this).css("display",d===h?"flex":"none")}):($(".quiz-progressbar-wrapper-2 .quiz-single-progress").css("display",""),$(".quiz-pro-bar-2").each(function(d){$(this).toggleClass("active",d<h)}),$(".quiz-single-title").each(function(d){$(this).toggleClass("active",d<h)}))}}$(window).on("resize",function(){I(window._currentStep||0)}),I(g),window._currentStep=g,$(l).toggle(g>0),g===v-1?($(m).hide(),$(u).show()):($(m).show(),$(u).hide()),window.dispatchEvent(new CustomEvent("stepChanged",{detail:{step:g}}))}m==null||m.addEventListener("click",async function(){g<v-1&&oe(i)&&(g++,C("next"))}),l==null||l.addEventListener("click",function(){g>0&&(g--,C("prev"))}),$(document).ready(function(){C(),n.addClass("cc-active")})}Ee()});var Fe="https://olympus-edge-proxy.owner-preview.dev/api",Ce={"Content-Type":"application/json","X-PB-Audience":"eris","X-PB-Client":"web"};async function Ae(e,s={}){let o=await fetch(e,{credentials:"include",...s,headers:{...s.headers||{}}});if(!o.ok){let a=await o.text().catch(()=>"");throw console.error("HTTP error details:",{url:e,status:o.status,statusText:o.statusText,body:a}),new Error(`${s.method||"GET"} failed: ${o.status}`)}return(o.headers.get("content-type")||"").includes("application/json")?o.json():await o.text().catch(()=>"")}var lt=(e,s="")=>Ae(`${Fe}/growth/v1/pipelines/brand-from-place-id`,{method:"POST",headers:Ce,body:JSON.stringify({googlePlaceId:e,source:s})}),ct=e=>Ae(`${Fe}/growth/v1/pipelines/${e}`,{headers:Ce}),ut=e=>Ae(`${Fe}/growth/v2/brands/${e}/report`,{headers:Ce}),Ge=e=>new Promise(s=>setTimeout(s,e));async function dt(e,s=3e3,o=3){var a;let i=Math.ceil(o*60*1e3/s);for(let _=1;_<=i;_++){console.log(`Fetching report... (attempt ${_}/${i})`);let S=await ut(e),b=(a=S==null?void 0:S.metadata)==null?void 0:a.status;if(console.log("Current status:",b),b==="complete")return console.log("Report completed."),S;if(b==="failed")throw new Error("Report generation failed.");await Ge(s)}throw new Error("Report did not complete within the allowed time.")}function Be(e,s){if(!(!e||typeof e!="object"))for(let o in e){if(o===s)return e[o];let i=e[o];if(i&&typeof i=="object"){let a=Be(i,s);if(a!==void 0)return a}}}function Ie(e){let s=0;if(Array.isArray(e))for(let o of e)s+=Ie(o);else if(typeof e=="object"&&e!==null){"complete"in e&&e.complete===!1&&s++;for(let o in e)s+=Ie(e[o])}return s}jQuery(document).ready(function(e){let s=0,o=setInterval(()=>{s=(s+1)%4;let a=`Scanning your site to increase your online sales ${".".repeat(s)}`;document.querySelectorAll(".quiz-content-inner-report .h24").forEach(_=>{_.textContent=a})},300);function i(a){o&&(clearInterval(o),o=null),a!=null&&loadingEls.forEach(_=>{_.textContent=a})}window.addEventListener("stepChanged",function(a){if(a.detail.step===1){let _=e("#place_id").val(),S=e("#restaurant-name-info").val();if(window._lastProcessedResname===S)return;window._lastProcessedResname=S,(async()=>{var b,P,E,f,D,L,me,pe,ne,oe,re,he,X,z,Y,ie,ge,ve,ae,le,we,be,U,Z,ye,G,J,ee,ce,_e,$e;try{document.querySelector(".h18.truncate").textContent=S;let H=await lt(_),K=H==null?void 0:H.pipelineExecutionId;if(!K){console.error("No pipelineExecutionId found",H);return}console.log("Pipeline Execution ID:",K);let M=null,ue=0,Ee=15;for(;!M&&ue<Ee;){let F=await ct(K),O=F==null?void 0:F.artifacts,te=F==null?void 0:F.status;if(M=(O==null?void 0:O.brandId)||null,console.log(`Attempt ${ue+1}: status=${te}, brandId=${M}`),M)break;if(te==="failed")throw new Error("Pipeline failed to complete.");await Ge(5e3),ue++}if(!M)throw new Error("BrandId not generated after polling attempts");console.log("Brand ID found:",M),await new Promise(F=>setTimeout(F,1e4));let t=await dt(M,2e3,3);console.log("Report Response:",t);let n=(t==null?void 0:t.metadata)||{},r=(n==null?void 0:n.name)||"",l=(n==null?void 0:n.images)||{},m=Be(t,"website")||"",u=Ie(t),c=(E=(P=(b=t==null?void 0:t.scores)==null?void 0:b.overall)==null?void 0:P.score)!=null?E:0,v=(L=(D=(f=t==null?void 0:t.scores)==null?void 0:f.overall)==null?void 0:D.max)!=null?L:100,g=(me=n==null?void 0:n.egpv)!=null?me:0,C=(pe=n==null?void 0:n.isDisqualified)!=null?pe:!1;console.log("isDisqualified: "+C);let N=(1-c/100)*g*12,I=(Math.round(N/10)*10).toLocaleString("en-US");if(r===""){e(".report-container").css("visibility","hidden");return}else e(".report-container").css("visibility","visible");document.querySelector(".report-container > .h18").textContent=`${r} Grader Report`,document.querySelector(".highlighted-sub").textContent=`${r} ${m}`.trim(),document.querySelector(".highlighted-info .h16").textContent=`We found ${u} problems with your online presence`,e(".report-container .h20").html(`Fixing them with Owner could boost your sales by <strong>$${I}/year</strong>`),e(".circular-progress-value").html(`${c}<em class="small-text">/${v}</em>`),e(".stats-svg .progress").css("stroke-dashoffset",`calc(339.292 - (339.292 * ${c}) / 100)`);let h,k;c<60?(h="#d73815",k="Poor"):c<80?(h="orange",k="Fair"):(h="#008000",k="Good"),e(".stats-svg .progress").css("stroke",h),e(".stats-result-status").html(k);let R=(re=(oe=(ne=t==null?void 0:t.scores)==null?void 0:ne.searchResultsV2)==null?void 0:oe.score)!=null?re:0,y=(z=(X=(he=t==null?void 0:t.scores)==null?void 0:he.searchResultsV2)==null?void 0:X.max)!=null?z:1,d=R/y*100;e(".search-result .score-main").text(`${R}/${y}`),e(".search-result .score-svg .progress").css("stroke-dashoffset",`calc(151 - (151 * ${R} / ${y}))`),d<=50?(e(".search-result .stats-item-info .p12").text("Poor").css("color","#ff3b3b"),e(".search-result .score-svg .progress").css("stroke","#ff3b3b")):d<=80?(e(".search-result .stats-item-info .p12").text("Fair").css("color","orange"),e(".search-result .score-svg .progress").css("stroke","orange")):(e(".search-result .stats-item-info .p12").text("Good").css("color","green"),e(".search-result .score-svg .progress").css("stroke","green"));let w=(ge=(ie=(Y=t==null?void 0:t.scores)==null?void 0:Y.guestExperience)==null?void 0:ie.score)!=null?ge:0,p=(le=(ae=(ve=t==null?void 0:t.scores)==null?void 0:ve.guestExperience)==null?void 0:ae.max)!=null?le:1,x=w/p*100;e(".website-experience .score-main").text(`${w}/${p}`),e(".website-experience .score-svg .progress").css("stroke-dashoffset",`calc(151 - (151 * ${w} / ${p}))`),x<=50?(e(".website-experience .stats-item-info .p12").text("Poor").css("color","#ff3b3b"),e(".website-experience .score-svg .progress").css("stroke","#ff3b3b")):x<=80?(e(".website-experience .stats-item-info .p12").text("Fair").css("color","orange"),e(".website-experience .score-svg .progress").css("stroke","orange")):(e(".website-experience .stats-item-info .p12").text("Good").css("color","green"),e(".website-experience .score-svg .progress").css("stroke","green"));let q=(U=(be=(we=t==null?void 0:t.scores)==null?void 0:we.reputation)==null?void 0:be.score)!=null?U:0,j=(G=(ye=(Z=t==null?void 0:t.scores)==null?void 0:Z.reputation)==null?void 0:ye.max)!=null?G:1,Q=q/j*100;e(".locallistings .score-main").text(`${q}/${j}`),e(".locallistings .score-svg .progress").css("stroke-dashoffset",`calc(151 - (151 * ${q} / ${j}))`),Q<=50?(e(".locallistings .stats-item-info .p12").text("Poor").css("color","#ff3b3b"),e(".locallistings .score-svg .progress").css("stroke","#ff3b3b")):Q<=80?(e(".locallistings .stats-item-info .p12").text("Fair").css("color","orange"),e(".locallistings .score-svg .progress").css("stroke","orange")):(e(".locallistings .stats-item-info .p12").text("Good").css("color","green"),e(".locallistings .score-svg .progress").css("stroke","green")),(J=l==null?void 0:l.profile)!=null&&J.url&&l.profile.url!=="null"&&((ee=document.querySelector(".highlighted-img"))==null||ee.setAttribute("src",l.profile.url),(ce=document.querySelector(".highlighted-img"))==null||ce.setAttribute("srcset",l.profile.url));let W=(($e=(_e=t==null?void 0:t.searchResultsV2)==null?void 0:_e.metadata)==null?void 0:$e.competitors)||null;if(Array.isArray(W)&&W.length){W.sort((O,te)=>{var B,xe;return((B=te.score)!=null?B:0)-((xe=O.score)!=null?xe:0)});let F="<div class='ranking-card-heading'>Who's beating you on Google</div>";W.forEach((O,te)=>{var Ve,ze;let B=te+1,xe=B===1?"1st":B===2?"2nd":B===3?"3rd":`${B}th`,Se="";B<=3?Se="success":B<=6?Se="warning":Se="danger",F+=`
            <div class="ranking-items">
              <div class="ranking-left">
                <div class="ranking-icon">
                  <img src="https://cdn.prod.website-files.com/66643a14df53b71d1ed72d08/68d296a930f3d03ce24c0ab0_cutlery.svg" loading="lazy" alt="">
</div>
                <div class="ranking-info">
                  <div class="ranking-res-name">${(Ve=O==null?void 0:O.name)!=null?Ve:""}</div>
                  <div class="ranking-stars">
                    <strong class="star-rating">${(ze=O==null?void 0:O.rating)!=null?ze:""}</strong> <strong>\u2605</strong>
</div>
</div>
</div>
              <div class="ranking-no ${Se}">${xe}</div>
</div>
          `}),document.querySelector(".ranking-card").innerHTML=F}else{let F=document.querySelector(".ranking-card");F&&(F.innerHTML="",F.style.display="none")}i(),document.querySelector(".thankyou-animation-2").style.display="none",document.querySelector(".thankyou-report-inner-2").style.display="flex";let Re="https://grader.owner.com/report/"+M+"?name="+r+"&city=Brooklyn&admin=true";C?(e(".quiz-content-inner-report .h24").text("Thanks, we'll be in touch soon!"),e(".quiz-report-content-desktop > div > .p16, .quiz-report-content > div > .p16").text("In the meantime, review your full Report, get competitor insights, and learn how to grow your sales."),e(".demo-form_success .steep-inner-quiz-report .button-quiz .quiz-button-text").text("Get My Full Report"),e(".demo-form_success .steep-inner-quiz-report .button-quiz .quiz-button-text").attr("href",Re)):(e(".quiz-content-inner-report .h24").text("Book a Demo to get your full report"),e(".quiz-report-content-desktop > div > .p16, .quiz-report-content > div > .p16").text("Book a 20-minute demo with an Owner Specialist to review your full Report, get competitor insights, and learn how to grow your sales."),e(".demo-form_success .steep-inner-quiz-report .button-quiz .quiz-button-text").text("Book a Demo"),e("[demo-form]").attr("data-custom-redirect",Re)),document.querySelectorAll(".demo-form_success .steep-inner-quiz-report .button-quiz, .quiz-report-content-desktop > div > .p16, .quiz-report-content > div > .p16").forEach(F=>{F.style.display="flex"}),window.innerWidth<=767&&e(".dark-bg-quiz").css("padding-bottom","30rem")}catch(H){console.error("Error:",H),i(),window.innerWidth<=767&&e(".dark-bg-quiz").css("padding-bottom","30rem"),document.querySelector(".thankyou-animation-2").style.display="none",document.querySelector(".quiz-report-content-desktop .button-quiz").style.display="none",document.querySelector(".thankyou-report-inner-2").style.display="none",document.querySelector(".thankyou-report-error").style.display="flex",e(".quiz-content-inner-report .h24").text("Thanks, we'll be in touch soon!"),e(".quiz-report-content-desktop > div > .p16, .quiz-report-content > div > .p16").text("In the meantime, review your full Report, get competitor insights, and learn how to grow your sales."),document.querySelectorAll(".quiz-report-content-desktop > div > .p16, .quiz-report-content > div > .p16").forEach(K=>{K.style.display="flex"})}})()}})});})();
