"use strict";(()=>{var x,M=new Uint8Array(16);function F(){if(!x&&(x=typeof crypto!="undefined"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!x))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return x(M)}var s=[];for(let e=0;e<256;++e)s.push((e+256).toString(16).slice(1));function C(e,t=0){return(s[e[t+0]]+s[e[t+1]]+s[e[t+2]]+s[e[t+3]]+"-"+s[e[t+4]]+s[e[t+5]]+"-"+s[e[t+6]]+s[e[t+7]]+"-"+s[e[t+8]]+s[e[t+9]]+"-"+s[e[t+10]]+s[e[t+11]]+s[e[t+12]]+s[e[t+13]]+s[e[t+14]]+s[e[t+15]]).toLowerCase()}var J=typeof crypto!="undefined"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),V={randomUUID:J};function Q(e,t,o){if(V.randomUUID&&!t&&!e)return V.randomUUID();e=e||{};let n=e.random||(e.rng||F)();if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,t){o=o||0;for(let r=0;r<16;++r)t[o+r]=n[r];return t}return C(n)}var k=Q;var c=(e,t)=>{$(`input[name=${e}]`).val(t)};var I=e=>{let t=localStorage.getItem(e);try{return JSON.parse(t)}catch{return t}},E=(e,t)=>{let o=typeof t=="object"?JSON.stringify(t):t;localStorage.setItem(e,o)};var B="restaurant";var A=()=>{let e=JSON.parse(localStorage.getItem(B)),t=["bar","cafe","bakery","food","restaurant"];for(let o=0;o<t.length;o++)if(e.types.includes(t[o]))return!0;return!1};function W(e){let o=/^([\w-\.]+@([\w-]+\.)+[\w-]{2,4})?$/.test($(e).val());return m($(e),!o,"Please fill correct email address."),o}function X(e){let t=!0;return t=K(e),t}var P=!1;function K(e){if(P)return P=!1,!0;let t=A();return t?m($(e),!1):m($(e),!0,"Are you sure this is correct? Please update your entry to a recognized restaurant."),P=!0,t}function Y(e){let t,o=$(e).siblings(".select2"),n=$(e).siblings(".nice-select");o?t=o.find(".select2-selection--single"):n?t=$(n):t=$(e);let r=!0;return $(e).val()===""?(validArr.push(selectVal),$(t).addClass("is-invalid"),r=!1):$(t).removeClass("is-invalid"),r}function Z(e){return m($(e),!1),!0}function ee(e){return $(e).attr("name")==="restaurant-name"&&m($(e),!0,"Please select a business location from the search results."),m($(e),!0),!1}var O=e=>{let t=e,o=!0;return $(t).prop("required")&&($(t).val()?$(t).is('[type="email"]')?o=W(t):$(t).attr("name")==="restaurant-name"?o=X(t):$(t).is("select")?o=Y(t):o=Z(t):o=ee(t)),o?m($(t),!1):$(t).addClass("error"),o},m=(e,t,o)=>{let n=$(e).closest(".form-field-wrapper, [field-wrapper]").find(".field-validation, [field-validation]");$(e).closest(".form-field, [form-field]").toggleClass("error",t),n.toggle(t),o&&n.text(o)};var N=(e,r,o)=>{var n=$(e),r=$(r);Object.keys(o).forEach(function(d){var p=o[d],y=n.find('input[name="'+d.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&")+'"]');y.length===0&&(y=n.find('select[name="'+d.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&")+'"]'));var v=y.val();Array.isArray(p)||(p=[p]),p.forEach(function(w){var u=r.find("input[name="+w.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&")+"]");u.attr("type")==="checkbox"?String(v).toLowerCase()==="true"?u.prop("checked",!0):u.prop("checked",!1):oe(u,".hs-datepicker")?u.siblings("input[readonly]").val(v).change():u.val(v),["phone","mobilephone","email","pred_gmv"].includes(w)&&(u.get(0).focus({preventScrol:!0}),u.get(0).blur())})})},te=e=>{let t=!1;var o=e.find("input[name=mobilephone]").parent().siblings(".hs-error-msgs").find(".hs-error-msg").text(),n=$('input[name="cellphone"]').closest("[field-wrapper]").find("[field-validation]");o?(t=!0,n.text(o),n.show()):n.hide();var r=e.find("input[name=email]").closest(".hs-fieldtype-text").find(".hs-error-msgs").find(".hs-error-msg").text(),d=$('input[name="email"]').closest("[field-wrapper]").find("[field-validation]");return r?(d.text(r),d.show(),t=!0):d.hide(),t};function U(e){L(e)}function j(){return new Promise(function(e){L=e})}var T=e=>{let t=$('[data-form="submit-btn"]'),o,n=()=>{t.addClass("disabled")},r=()=>{t.removeClass("disabled")};b(!0),n(),setTimeout(()=>{o=te(e),r(),o?b(!1):e.find("input[type=submit]").trigger("click")},3e3)};function b(e){let t=$(".n_demo-form_loading");e?(t.find('[data-animation-type="lottie"]').trigger("click"),t.fadeIn()):t.hide()}var L;function oe(e,t){let o=e[0]||e.get(0);if(!o)return!1;let{parentNode:n}=o;return n?Array.from(n.children).some(r=>r!==o&&r.matches(t)):!1}$(document).ready(()=>{let e,t=I("userId");t||(t=k(),E("userId",t)),console.log(t);function o(a,i,_,g){let l=i;console.log(l),g&&(l.location.errorMessage=g),typeof FS!="undefined"&&FS&&FS.event(_,FS.identify(a,l))}let n=()=>I("restaurant");function r(){return new Promise((a,i)=>{try{e=!1,a()}catch(_){i(_)}})}function d(){let a=n(),i={name:a.name,address:a.formatted_address,website:a.website,email:"jonathan@owner.com",token:"AJXuyxPXgGF68NMv",sfdc_id:"None"},_;function g(l){return new Promise((f,ne)=>{$.ajax({url:"https://owner-ops.net/business-info/",type:"POST",contentType:"application/json",dataType:"json",data:JSON.stringify(l),timeout:15e3,success:function(R){f(R)},error:function(R,H,q){H==="timeout"?(console.log("Error occurred:",q),c("execution_time_seconds",15),c("gmv_pred",0),f("")):(console.log("Error occurred:",q),f(""))}})})}return g(i).then(l=>(console.log(l),l[0])).catch(l=>(console.error("Error:",l),!1))}function p(a,i){let _=$("#demo-form input"),g=["brizo_id","base_enrich_date","inbound_add_to_cadence","execution_time_seconds","auto_dq_flag","auto_dq_reason","gmv_pred","inbound_add_to_cadence"];i?_.each(function(){let l=$(this).attr("name");if(g.includes(l)&&a.hasOwnProperty(l)){var f=a[l];typeof f=="number"||!isNaN(f)&&!isNaN(parseFloat(f))?$(this).val(Number(f).toFixed(2)):$(this).val(f)}}):v(!1)}function y(){let a=!0;return h.find(":input:visible, select").each(function(){let i=O($(this));a=a&&i}),a}function v(a){c("base_enrich_date",new Date().toISOString().slice(0,10)),c("inbound_add_to_cadence","true"),a&&(c("execution_time_seconds",0),c("auto_dq_flags","true")),a===!0&&(c("auto_dq_reason","none"),c("auto_dq_flags","false"))}function w(){c("page_url",window.location.pathname),c("page_lang",$("html").attr("lang")),c("url",(()=>{var a=n(),i=a.url;return i.split("cid=")[1]})())}async function u(){if(y()){b(!0);try{if(await r(),typeof e!="boolean"){let i=await d();typeof i.auto_dq_flag=="string"?(e=i.auto_dq_flag!=="True",p(i,!0)):(e=!1,p(i,!1))}}catch(i){e=!1,console.log("Qualification check or call failed:",i)}w(),N(h,S,G),T(S)}}function z(){u()}let D=()=>{let a=$(".n_demo-form_success");b(!1),h.hide(),a.show(),window.location.href=e?"https://meetings.hubspot.com/brandon767/sales-inbound-round-robin":"https://www.owner.com/funnel-demo-requested"},h=$("#demo-form"),S;hbspt.forms.create({portalId:"6449395",formId:"f3807262-aed3-4b9c-93a3-247ad4c55e60",target:"#hbst-form",onFormReady:U,onFormSubmit:()=>{growsumo.data.name=h.find('input[name="name"]').val(),growsumo.data.email=h.find('input[name="email"]').val(),growsumo.data.customer_key=h.find('input[name="email"]').val(),growsumo.createSignup()},onFormSubmitted:D}),j().then(function(a){S=$(a)});let G={name:["company","0-2/name"],international_phone_number:["phone","0-2/phone"],"restaurant-address":["address","0-2/address"],locality:["city","0-2/city"],administrative_area_level_1:["state","0-2/state"],postal_code:["zip","0-2/zip"],country:["country","0-2/country"],"first-name":"firstname","last-name":"lastname",cellphone:"mobilephone",email:"email","person-type":"lead_person_type",website:"website",place_id:"place_id",url:"place_cid",place_types:["place_types_contact","0-2/place_types"],rating:"place_rating",user_ratings_total:"user_ratings_total","number-of-locations":"of_locations_number",hear:"how_did_you_hear_about_us",page_url:"last_pdf_download",page_lang:"page_lang",brizo_id:["brizo_id","0-2/brizo_id_account"],base_enrich_date:["auto_enrich_date","0-2/auto_enrich_date_company"],inbound_add_to_cadence:"inbound_add_to_cadence",execution_time_seconds:"auto_enrich_time",auto_dq_flag:"auto_dq_static",auto_dq_reason:["auto_dq_reason","0-2/auto_dq_reason_company"],gmv_pred:["pred_gmv","0-2/pred_gmv_company"]};$("[data-form=submit-btn]").on("click",z),$(".nice-select li").on("click",function(){$(".nice-select .current").css("color","white")}),$('select[name="person-type"]').on("change",function(){$(this).val()==="I'm a restaurant owner or manager"?$("#locations-wrap").show():$("#locations-wrap").hide()})});})();
