"use strict";(()=>{var I,Q=new Uint8Array(16);function V(){if(!I&&(I=typeof crypto!="undefined"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!I))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return I(Q)}var l=[];for(let e=0;e<256;++e)l.push((e+256).toString(16).slice(1));function q(e,t=0){return l[e[t+0]]+l[e[t+1]]+l[e[t+2]]+l[e[t+3]]+"-"+l[e[t+4]]+l[e[t+5]]+"-"+l[e[t+6]]+l[e[t+7]]+"-"+l[e[t+8]]+l[e[t+9]]+"-"+l[e[t+10]]+l[e[t+11]]+l[e[t+12]]+l[e[t+13]]+l[e[t+14]]+l[e[t+15]]}var W=typeof crypto!="undefined"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),E={randomUUID:W};function X(e,t,n){if(E.randomUUID&&!t&&!e)return E.randomUUID();e=e||{};let a=e.random||(e.rng||V)();if(a[6]=a[6]&15|64,a[8]=a[8]&63|128,t){n=n||0;for(let s=0;s<16;++s)t[n+s]=a[s];return t}return q(a)}var N=X;var r=(e,t)=>{let n=$(`input[name="${e}"]`);n.attr("type")==="checkbox"?n.prop("checked",t):n.val(t)};var F=e=>{let t=localStorage.getItem(e);try{return JSON.parse(t)}catch{return t}},P=(e,t)=>{let n=typeof t=="object"?JSON.stringify(t):t;localStorage.setItem(e,n)};var K="restaurant";var O=()=>{let e=JSON.parse(localStorage.getItem(K)),t=["bar","cafe","bakery","food","restaurant"];for(let n=0;n<t.length;n++)if(e.types.includes(t[n]))return!0;return!1};function Y(e){let n=/^[\w-\.]+@([\w-]+\.)+[\w-]{2,}$/.test($(e).val());return _($(e),!n,"Please fill correct email address."),n}function Z(e){let t=!0;return t=ee(e),t}var A=!1;function ee(e){if(A)return A=!1,!0;let t=O();return t?_($(e),!1):_($(e),!0,"Are you sure this is correct? Please update your entry to a recognized restaurant."),A=!0,t}function te(e){let t,n=$(e).siblings(".select2"),a=$(e).siblings(".nice-select");n?t=n.find(".select2-selection--single"):a?t=$(a):t=$(e);let s=!0;return $(e).val()===""?(validArr.push(selectVal),$(t).addClass("is-invalid"),s=!1):$(t).removeClass("is-invalid"),s}function ne(e){return _($(e),!1),!0}function oe(e){return $(e).attr("name")==="restaurant-name"&&_($(e),!0,"Please select a business location from the search results."),_($(e),!0),!1}var U=e=>{let t=e,n=!0;return $(t).prop("required")&&($(t).val()?$(t).is('[type="email"]')?n=Y(t):$(t).attr("name")==="restaurant-name"?n=Z(t):$(t).is("select")?n=te(t):n=ne(t):n=oe(t)),n?_($(t),!1):$(t).addClass("error"),n},_=(e,t,n)=>{let a=$(e).closest(".form-field-wrapper, [field-wrapper]").find(".field-validation, [field-validation]");$(e).closest(".form-field, [form-field]").toggleClass("error",t),a.toggle(t),n&&a.text(n)};var T=(e,s,n)=>{var a=$(e),s=$(s);Object.keys(n).forEach(function(v){var h=n[v],y=a.find('input[name="'+v.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&")+'"]');y.length===0&&(y=a.find('select[name="'+v.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&")+'"]'));var g=y.val();Array.isArray(h)||(h=[h]),h.forEach(function(b){var m=s.find("input[name="+b.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&")+"]");m.attr("type")==="checkbox"?String(g).toLowerCase()==="true"?m.prop("checked",!0):m.prop("checked",!1):ae(m,".hs-datepicker")?m.siblings("input[readonly]").val(g).change():m.val(g),["phone","mobilephone","email","pred_gmv"].includes(b)&&(m.get(0).focus({preventScrol:!0}),m.get(0).blur())})})};function j(e){z(e)}function L(){return new Promise(function(e){z=e})}function R(e){let t=$("[form-loader]");e?(t.find('[data-animation-type="lottie"]').trigger("click"),t.fadeIn()):t.hide()}var z;function ae(e,t){let n=e[0]||e.get(0);if(!n)return!1;let{parentNode:a}=n;return a?Array.from(a.children).some(s=>s!==n&&s.matches(t)):!1}$(document).ready(()=>{let e,t=F("userId");t||(t=N(),P("userId",t));function n(o){function i(){let{userAgent:S}=navigator,M=navigator.appName,{platform:B}=navigator,{language:J}=navigator;return{userAgent:S,browser:M,platform:B,language:J}}let c=i(),f=p.find($("input[name=first-name]")).val(),u=p.find($("input[name=last-name]")).val(),d=p.find($("input[name=name]")).val(),w=p.find($("input[name=cellphone]")).val(),x=p.find($("input[name=email]")).val(),k={displayName:f+" "+u,restaurantName:d,phone:w,email:x,firstName:f,lastName:u,...c};typeof FS!="undefined"&&FS&&FS.event(o,FS.identify(t,k))}let a=()=>F("restaurant");function s(){return new Promise((o,i)=>{try{if(typeof scheduleFlow!="undefined"&&scheduleFlow){let c=a();e=void 0;let f=$('select[name="person-type"]').val()==="I'm a restaurant owner or manager",u=$('input[name="number-of-locations"]').val()>1,d=c.address_components.some(w=>w.short_name==="US");f&&u&&(n("Submission Qualified"),e=!0),(!f||!d)&&(n("Submission Disqualified"),e=!1)}else e=!1;o()}catch(c){i(c)}})}function v(){let o=a(),i={name:o.name,address:o.formatted_address,website:o.website,email:"jonathan@owner.com",token:"AJXuyxPXgGF68NMv",sfdc_id:"None"},c;function f(u){return new Promise((d,w)=>{$.ajax({url:"https://owner-ops.net/business-info/",type:"POST",contentType:"application/json",dataType:"json",data:JSON.stringify(u),timeout:15e3,success:function(x){d(x)},error:function(x,k,S){k==="timeout"?(console.log("Error occurred:",S),r("execution_time_seconds",15),r("gmv_pred",0),d("")):(console.log("Error occurred:",S),d(""))}})})}return f(i).then(u=>(console.log(u),u[0])).catch(u=>(console.error("Error:",u),!1))}function h(o,i){let c=$("#demo-form input"),f=["brizo_id","base_enrich_date","inbound_add_to_cadence","execution_time_seconds","auto_dq_flag","auto_dq_reason","gmv_pred","inbound_add_to_cadence"];i?c.each(function(){let u=$(this).attr("name");if(f.includes(u)&&o.hasOwnProperty(u)){var d=o[u];typeof d=="number"||!isNaN(d)&&!isNaN(parseFloat(d))?$(this).val(Number(d).toFixed(2)):$(this).val(d)}}):g(!1)}function y(){let o=!0;return p.find(":input:visible, select").each(function(){let i=U($(this));o=o&&i}),o}function g(o){r("base_enrich_date",new Date().toISOString().slice(0,10)),r("inbound_add_to_cadence","true"),o&&(r("execution_time_seconds",0),r("auto_dq_flags","true")),o===!0&&(r("execution_time_seconds",0),r("auto_dq_reason","none"),r("auto_dq_flags","false"),r("self_service_scheduling_shown",!0))}function b(){r("page_url",window.location.pathname),r("page_lang",$("html").attr("lang")),r("url",(()=>{var i=a(),c=i.url;return c.split("cid=")[1]})());function o(i){let c=new URLSearchParams(window.location.search).get(i);return c||null}r("0-2/ps_partner_key",o("ps_partner_key")),r("0-2/ps_xid",o("ps_xid")),r("ps_partner_key",o("ps_partner_key")),r("ps_xid",o("ps_xid"))}async function m(){let o=y();if(console.log(o),o){R(!0);try{if(await s(),typeof e!="boolean"){let i=await v(),c=i.auto_dq_flag;r("self_service_enrichment_api_used",!0),typeof c=="string"?(e=i.auto_dq_flag!=="True",h(i,!0),e&&r("self_service_scheduling_shown",!0)):(e=!1,h(i,!1))}else g(e)}catch(i){e=!1,console.log("Qualification check or call failed:",i)}b(),T(p,C,H),n("Form Button Clicked")}}function D(){m()}let G=()=>{let o=$(".demo-form_success");R(!1),p.hide(),o.show(),!window.location.href.includes("/blog/")&&!window.location.href.includes("/resources/")&&!window.location.href.includes("/downloads/")&&(window.location.href=e?"https://meetings.hubspot.com/brandon767/sales-inbound-round-robin":"https://www.owner.com/funnel-demo-requested")},p=$("[demo-form]"),C;hbspt.forms.create({portalId:"6449395",formId:"f3807262-aed3-4b9c-93a3-247ad4c55e60",target:"#hbst-form",onFormReady:j,onFormSubmit:function(){console.log("Submit"),n("Form Submission Attempt")},onFormSubmitted:()=>{n("Form Submission Sent"),setTimeout(()=>{G()},200)}}),L().then(function(o){C=$(o)});let H={name:["company","0-2/name"],international_phone_number:["phone","0-2/phone"],"restaurant-address":["address","0-2/address"],locality:["city","0-2/city"],administrative_area_level_1:["state","0-2/state"],postal_code:["zip","0-2/zip"],country:["country","0-2/country"],"first-name":"firstname","last-name":"lastname",cellphone:"mobilephone",email:"email","person-type":"lead_person_type",website:"website",place_id:"place_id",url:"place_cid",place_types:["place_types_contact","0-2/place_types"],rating:"place_rating",user_ratings_total:"user_ratings_total","number-of-locations":"of_locations_number",hear:"how_did_you_hear_about_us",page_url:"last_pdf_download",page_lang:"page_lang",brizo_id:["brizo_id","0-2/brizo_id_account"],base_enrich_date:["auto_enrich_date","0-2/auto_enrich_date_company"],inbound_add_to_cadence:"inbound_add_to_cadence",execution_time_seconds:"auto_enrich_time",auto_dq_flag:"auto_dq_static",auto_dq_reason:["auto_dq_reason","0-2/auto_dq_reason_company"],gmv_pred:["pred_gmv","0-2/pred_gmv_company"]};$("[data-form=submit-btn]").on("click",D),$('select[name="person-type"]').on("change",function(){$(this).val()==="I'm a restaurant owner or manager"?$("#locations-wrap").show():$("#locations-wrap").hide()}),new Cleave('input[name="cellphone"]',{numericOnly:!0,blocks:[0,3,3,4,10],delimiters:["(",") ","-"," x"],delimiterLazyShow:!0})});})();
