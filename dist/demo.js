"use strict";(()=>{var I,X=new Uint8Array(16);function E(){if(!I&&(I=typeof crypto!="undefined"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!I))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return I(X)}var c=[];for(let e=0;e<256;++e)c.push((e+256).toString(16).slice(1));function R(e,t=0){return c[e[t+0]]+c[e[t+1]]+c[e[t+2]]+c[e[t+3]]+"-"+c[e[t+4]]+c[e[t+5]]+"-"+c[e[t+6]]+c[e[t+7]]+"-"+c[e[t+8]]+c[e[t+9]]+"-"+c[e[t+10]]+c[e[t+11]]+c[e[t+12]]+c[e[t+13]]+c[e[t+14]]+c[e[t+15]]}var K=typeof crypto!="undefined"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),A={randomUUID:K};function Y(e,t,n){if(A.randomUUID&&!t&&!e)return A.randomUUID();e=e||{};let o=e.random||(e.rng||E)();if(o[6]=o[6]&15|64,o[8]=o[8]&63|128,t){n=n||0;for(let r=0;r<16;++r)t[n+r]=o[r];return t}return R(o)}var C=Y;var i=(e,t)=>{let n=$(`input[name="${e}"]`);n.attr("type")==="checkbox"?n.prop("checked",t):n.val(t)};var k=e=>{let t=localStorage.getItem(e);try{return JSON.parse(t)}catch{return t}},N=(e,t)=>{let n=typeof t=="object"?JSON.stringify(t):t;localStorage.setItem(e,n)};var q=!1,P=e=>{let t=JSON.parse(localStorage.getItem("restaurant"));if(t&&Array.isArray(t.types)){let n=["bar","cafe","bakery","food","restaurant"];return!t.types.some(r=>n.includes(r))&&!q?(p(e),q=!0,!1):!0}return!1};function Z(e){let n=/^[\w-\.]+@([\w-]+\.)+[\w-]{2,}$/.test($(e).val());return p($(e),!n,"Please fill correct email address."),n}function ee(e){let t=!0;return t=te(e),t}function te(e){let t=P(e);return t?p($(e),!1):p($(e),!0),t}function ne(e){let t,n=$(e).siblings(".select2"),o=$(e).siblings(".nice-select");n?t=n.find(".select2-selection--single"):o?t=$(o):t=$(e);let r=!0;return $(e).val()===""?(validArr.push(selectVal),$(t).addClass("is-invalid"),r=!1):$(t).removeClass("is-invalid"),r}function ae(e){return p($(e),!1),!0}function oe(e){return $(e).attr("name")==="restaurant-name"&&p($(e),!0,"Please select a business location from the search results."),p($(e),!0),!1}var U=e=>{let t=e,n=!0;return $(t).prop("required")&&($(t).val()?$(t).is('[type="email"]')?n=Z(t):$(t).attr("name")==="restaurant-name"?n=ee(t):$(t).is("select")?n=ne(t):n=ae(t):n=oe(t)),n?p($(t),!1):$(t).addClass("error"),n},p=(e,t,n)=>{let o=$(e).closest(".form-field-wrapper, [field-wrapper]").find(".field-validation, [field-validation]");$(e).closest(".form-field, [form-field]").toggleClass("error",t),o.toggle(t),n&&o.text(n)};var j=(e,r,n)=>{var o=$(e),r=$(r);Object.keys(n).forEach(function(f){var g=n[f],v=o.find('input[name="'+f.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&")+'"]');v.length===0&&(v=o.find('select[name="'+f.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&")+'"]'));var y=v.val();Array.isArray(g)||(g=[g]),g.forEach(function(b){var m=r.find("input[name="+b.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&")+"]");m.attr("type")==="checkbox"?String(y).toLowerCase()==="true"?m.prop("checked",!0):m.prop("checked",!1):se(m,".hs-datepicker")?m.siblings("input[readonly]").val(y).change():m.val(y),["phone","mobilephone","email","pred_gmv"].includes(b)&&(m.get(0).focus({preventScrol:!0}),m.get(0).blur())})})},re=e=>{let t=!1;var n=e.find("input[name=mobilephone]").parent().siblings(".hs-error-msgs").find(".hs-error-msg").text(),o=$('input[name="cellphone"]').closest("[field-wrapper]").find("[field-validation]");n?(t=!0,o.text(n),o.show()):o.hide();var r=e.find("input[name=email]").closest(".hs-fieldtype-text").find(".hs-error-msgs").find(".hs-error-msg").text(),f=$('input[name="email"]').closest("[field-wrapper]").find("[field-validation]");return r?(f.text(r),f.show(),t=!0):f.hide(),t};function T(e){D(e)}function L(){return new Promise(function(e){D=e})}var z=e=>{let t=$('[data-form="submit-btn"]'),n,o=()=>{t.addClass("disabled")},r=()=>{t.removeClass("disabled")};w(!0),o(),setTimeout(()=>{n=re(e),r(),n?w(!1):e[0].submit()},3e3)};function w(e){let t=$("[form-loader]");e?(t.find('[data-animation-type="lottie"]').trigger("click"),t.fadeIn()):t.hide()}var D;function se(e,t){let n=e[0]||e.get(0);if(!n)return!1;let{parentNode:o}=n;return o?Array.from(o.children).some(r=>r!==n&&r.matches(t)):!1}$(document).ready(()=>{let e,t=k("userId");t||(t=C(),N("userId",t));function n(a){function s(){let{userAgent:S}=navigator,J=navigator.appName,{platform:Q}=navigator,{language:W}=navigator;return{userAgent:S,browser:J,platform:Q,language:W}}let l=s(),h=_.find($("input[name=first-name]")).val(),u=_.find($("input[name=last-name]")).val(),d=_.find($("input[name=name]")).val(),O=_.find($("input[name=cellphone]")).val(),x=_.find($("input[name=email]")).val(),V={displayName:h+" "+u,restaurantName:d,phone:O,email:x,firstName:h,lastName:u,...l};typeof FS!="undefined"&&FS&&FS.event(a,FS.identify(t,V))}function o(){var a="db833abde57f505b06b0e4b2bfe5e24f",s="2226621",l=document.createElement("img");l.src="https://ct.capterra.com/capterra_tracker.gif?vid="+s+"&vkey="+a,document.body.appendChild(l)}let r=()=>k("restaurant");function f(){return new Promise((a,s)=>{try{if(typeof scheduleFlow!="undefined"&&scheduleFlow){let l=r();e=void 0;let h=$('select[name="person-type"]').val()==="I'm a restaurant owner or manager",u=l.address_components.some(d=>d.short_name==="US");(!h||!u)&&(n("Submission Disqualified"),e=!1)}else e=!1;a()}catch(l){s(l)}})}function g(){let a=r(),s={name:a.name,address:a.formatted_address,website:a.website,email:"jonathan@owner.com",token:"AJXuyxPXgGF68NMv",sfdc_id:"None"},l;function h(u){return new Promise((d,O)=>{$.ajax({url:"https://owner-ops.net/business-info/",type:"POST",contentType:"application/json",dataType:"json",data:JSON.stringify(u),timeout:15e3,success:function(x){d(x)},error:function(x,V,S){V==="timeout"?(console.log("Error occurred:",S),i("execution_time_seconds",15),i("gmv_pred",0),d("")):(console.log("Error occurred:",S),d(""))}})})}return h(s).then(u=>(console.log(u),u[0])).catch(u=>(console.error("Error:",u),!1))}function v(a,s){console.log(a),console.log(s);let l=$("[demo-form] input"),h=["brizo_id","base_enrich_date","inbound_add_to_cadence","execution_time_seconds","auto_dq_flag","auto_dq_reason","gmv_pred"];s?l.each(function(){let u=$(this).attr("name");if(h.includes(u)&&a.hasOwnProperty(u)){var d=a[u];typeof d=="number"||!isNaN(d)&&!isNaN(parseFloat(d))?$(this).val(Number(d).toFixed(2)):$(this).val(d)}}):b(!1)}function y(){let a=!0;return _.find(":input:visible, select").each(function(){let s=U($(this));a=a&&s}),a}function b(a){console.log(a),i("base_enrich_date",new Date().toISOString().slice(0,10)),i("inbound_add_to_cadence","true"),a===!1&&(i("execution_time_seconds",0),i("auto_dq_flags","true")),a===!0&&(i("execution_time_seconds",0),i("auto_dq_reason","none"),i("auto_dq_flags","false"),i("self_service_scheduling_shown",!0))}function m(){i("page_url",window.location.pathname),i("page_lang",$("html").attr("lang")),i("url",(()=>{var s=r();if(s&&s.url){var l=s.url;return l.split("cid=")[1]}return"none"})());function a(s){let l=new URLSearchParams(window.location.search).get(s);return l||null}i("0-2/ps_partner_key",a("ps_partner_key")),i("0-2/ps_xid",a("ps_xid")),i("ps_partner_key",a("ps_partner_key")),i("ps_xid",a("ps_xid"))}async function M(){let a=y();if(console.log(a),a){w(!0);try{if(await f(),typeof e!="boolean"){let s=await g(),l=s.auto_dq_flag;i("self_service_enrichment_api_used",!0),typeof l=="string"?(e=s.auto_dq_flag!=="True",v(s,!0),e&&i("self_service_scheduling_shown",!0)):(e=!1,v(s,!1))}else b(e)}catch(s){e=!1,console.log("Qualification check or call failed:",s)}m(),j(_,F,B),n("Form Button Clicked"),z(F)}}function G(){M()}let H=()=>{let a=$(".demo-form_success");w(!1),_.hide(),a.show(),!window.location.href.includes("/blog/")&&!window.location.href.includes("/resources/")&&!window.location.href.includes("/downloads/")&&(window.location.href=e?"https://meetings.hubspot.com/jonathan-shenkman/self-scheduling":"https://www.owner.com/funnel-demo-requested")},_=$("[demo-form]"),F;hbspt.forms.create({portalId:"6449395",formId:"f3807262-aed3-4b9c-93a3-247ad4c55e60",target:"#hbst-form",onFormReady:T,onFormSubmit:function(){console.log("Submit"),n("Form Submission Attempt")},onFormSubmitted:()=>{n("Form Submission Sent"),o(),setTimeout(()=>{H()},200)}}),L().then(function(a){F=$(a)});let B={name:["company","0-2/name"],international_phone_number:["phone","0-2/phone"],"restaurant-address":["address","0-2/address"],locality:["city","0-2/city"],administrative_area_level_1:["state","0-2/state"],postal_code:["zip","0-2/zip"],country:["country","0-2/country"],"first-name":"firstname","last-name":"lastname",cellphone:"mobilephone",email:"email","person-type":"lead_person_type",website:"website",place_id:"place_id",url:"place_cid",place_types:["place_types_contact","0-2/place_types"],rating:"place_rating",user_ratings_total:"user_ratings_total","number-of-locations":"of_locations_number",hear:"how_did_you_hear_about_us",page_url:"last_pdf_download",page_lang:"page_lang",brizo_id:["brizo_id","0-2/brizo_id_account"],base_enrich_date:["auto_enrich_date","0-2/auto_enrich_date_company"],inbound_add_to_cadence:"inbound_add_to_cadence",execution_time_seconds:"auto_enrich_time",auto_dq_flag:"auto_dq_static",auto_dq_reason:["auto_dq_reason","0-2/auto_dq_reason_company"],gmv_pred:["pred_gmv","0-2/pred_gmv_company"]};$("[data-form=submit-btn]").on("click",G),$('select[name="person-type"]').on("change",function(){$(this).val()==="I'm a restaurant owner or manager"?$("#locations-wrap").show():$("#locations-wrap").hide()}),new Cleave('input[name="cellphone"]',{numericOnly:!0,blocks:[0,3,3,4,10],delimiters:["(",") ","-"," x"],delimiterLazyShow:!0})});})();
