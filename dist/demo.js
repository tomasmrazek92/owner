"use strict";(()=>{var k,Z=new Uint8Array(16);function N(){if(!k&&(k=typeof crypto!="undefined"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!k))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return k(Z)}var u=[];for(let e=0;e<256;++e)u.push((e+256).toString(16).slice(1));function R(e,t=0){return u[e[t+0]]+u[e[t+1]]+u[e[t+2]]+u[e[t+3]]+"-"+u[e[t+4]]+u[e[t+5]]+"-"+u[e[t+6]]+u[e[t+7]]+"-"+u[e[t+8]]+u[e[t+9]]+"-"+u[e[t+10]]+u[e[t+11]]+u[e[t+12]]+u[e[t+13]]+u[e[t+14]]+u[e[t+15]]}var ee=typeof crypto!="undefined"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),O={randomUUID:ee};function te(e,t,n){if(O.randomUUID&&!t&&!e)return O.randomUUID();e=e||{};let a=e.random||(e.rng||N)();if(a[6]=a[6]&15|64,a[8]=a[8]&63|128,t){n=n||0;for(let i=0;i<16;++i)t[n+i]=a[i];return t}return R(a)}var A=te;var d=(e,t)=>{let n=$(`input[name="${e}"]`);n.attr("type")==="checkbox"?n.prop("checked",t):n.val(t)},x=e=>$(`input[name="${e}"]`).val();var V=e=>{let t=localStorage.getItem(e);try{return JSON.parse(t)}catch{return t}},C=(e,t)=>{let n=typeof t=="object"?JSON.stringify(t):t;localStorage.setItem(e,n)};var U=!1,j=e=>{let t=JSON.parse(localStorage.getItem("restaurant"));if(console.log(t),t&&Array.isArray(t.types)){let n=["bar","cafe","bakery","food","restaurant"];return!t.types.some(i=>n.includes(i))&&!U?(_(e),U=!0,!1):!0}return!1};function ne(e){let n=/^[\w-\.]+@([\w-]+\.)+[\w-]{2,}$/.test($(e).val());return _($(e),!n,"Please fill correct email address."),n}function oe(e){let t=!0;return t=ae(e),t}function ae(e){let t=j(e);return t?_($(e),!1):_($(e),!0),t}function re(e){let t,n=$(e).siblings(".select2"),a=$(e).siblings(".nice-select");n?t=n.find(".select2-selection--single"):a?t=$(a):t=$(e);let i=!0;return $(e).val()===""?(validArr.push(selectVal),$(t).addClass("is-invalid"),i=!1):$(t).removeClass("is-invalid"),i}function se(e){return _($(e),!1),!0}function ie(e){return $(e).attr("name")==="restaurant-name"&&_($(e),!0,"Please select a business location from the search results."),_($(e),!0),!1}var q=e=>{let t=e,n=!0;return $(t).prop("required")&&($(t).val()?$(t).is('[type="email"]')?n=ne(t):$(t).attr("name")==="restaurant-name"?n=oe(t):$(t).is("select")?n=re(t):n=se(t):n=ie(t)),n?_($(t),!1):$(t).addClass("error"),n},_=(e,t,n)=>{let a=$(e).closest(".form-field-wrapper, [field-wrapper]").find(".field-validation, [field-validation]");$(e).closest(".form-field, [form-field]").toggleClass("error",t),a.toggle(t),n&&a.text(n)};var T=(e,i,n)=>{var a=$(e),i=$(i);Object.keys(n).forEach(function(p){var y=n[p],w=a.find('input[name="'+p.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&")+'"]');w.length===0&&(w=a.find('select[name="'+p.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&")+'"]'));var b=w.val();Array.isArray(y)||(y=[y]),y.forEach(function(I){var h=i.find("input[name="+I.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&")+"]");h.attr("type")==="checkbox"?String(b).toLowerCase()==="true"?h.prop("checked",!0):h.prop("checked",!1):ce(h,".hs-datepicker")?h.siblings("input[readonly]").val(b).change():h.val(b),["phone","mobilephone","email","pred_gmv"].includes(I)&&(h.get(0).focus({preventScrol:!0}),h.get(0).blur())})})},le=e=>{let t=!1;var n=e.find("input[name=mobilephone]").parent().siblings(".hs-error-msgs").find(".hs-error-msg").text(),a=$('input[name="cellphone"]').closest("[field-wrapper]").find("[field-validation]");n?(t=!0,a.text(n),a.show()):a.hide();var i=e.find("input[name=email]").closest(".hs-fieldtype-text").find(".hs-error-msgs").find(".hs-error-msg").text(),p=$('input[name="email"]').closest("[field-wrapper]").find("[field-validation]");return i?(p.text(i),p.show(),t=!0):p.hide(),t};function M(e){D(e)}function L(){return new Promise(function(e){D=e})}var z=e=>{let t=$('[data-form="submit-btn"]'),n,a=()=>{t.addClass("disabled")},i=()=>{t.removeClass("disabled")};S(!0),a(),setTimeout(()=>{n=le(e),i(),n?S(!1):e[0].submit()},3e3)};function S(e){let t=$("[form-loader]");e?(t.find('[data-animation-type="lottie"]').trigger("click"),t.fadeIn()):t.hide()}var D;function ce(e,t){let n=e[0]||e.get(0);if(!n)return!1;let{parentNode:a}=n;return a?Array.from(a.children).some(i=>i!==n&&i.matches(t)):!1}function J(){let e=sessionStorage.getItem("utmParams");if(!e)return{};try{return JSON.parse(e)}catch(t){return console.error("Error parsing UTM params from sessionStorage:",t),{}}}$(document).ready(()=>{let e,t=typeof scheduleFlow!="undefined"&&scheduleFlow,n=V("userId");n||(n=A(),C("userId",n));function a(o){function r(){let{userAgent:F}=navigator,W=navigator.appName,{platform:X}=navigator,{language:Y}=navigator;return{userAgent:F,browser:W,platform:X,language:Y}}let l=r(),m=v.find($("input[name=first-name]")).val(),c=v.find($("input[name=last-name]")).val(),s=v.find($("input[name=name]")).val(),f=v.find($("input[name=cellphone]")).val(),g=v.find($("input[name=email]")).val(),E={displayName:m+" "+c,restaurantName:s,phone:f,email:g,firstName:m,lastName:c,...l};typeof FS!="undefined"&&FS&&FS.event(o,FS.identify(n,E))}function i(){var o="db833abde57f505b06b0e4b2bfe5e24f",r="2226621",l=document.createElement("img");l.src="https://ct.capterra.com/capterra_tracker.gif?vid="+r+"&vkey="+o,document.body.appendChild(l)}let p=()=>V("restaurant");function y(){return new Promise((o,r)=>{try{if(t){let l=p();e=void 0;let m=$('select[name="person-type"]').val()==="I'm a restaurant owner or manager",c=l.address_components.some(s=>s.short_name==="US");(!m||!c)&&(a("Submission Disqualified"),e=!1)}else e=!1;o()}catch(l){r(l)}})}function w(){let o=p(),r={name:o.name,address:o.formatted_address,website:o.website,email:"jonathan@owner.com",token:"AJXuyxPXgGF68NMv",sfdc_id:"None"},l;function m(c){return new Promise((s,f)=>{$.ajax({url:"https://owner-ops.net/business-info/",type:"POST",contentType:"application/json",dataType:"json",data:JSON.stringify(c),timeout:15e3,success:function(g){s(g)},error:function(g,E,F){E==="timeout"?(console.log("Error occurred:",F),d("execution_time_seconds",15),d("gmv_pred",0),s("")):(console.log("Error occurred:",F),s(""))}})})}return m(r).then(c=>(console.log(c),c[0])).catch(c=>(console.error("Error:",c),!1))}function b(o,r){console.log(o),console.log(r);let l=$("[demo-form] input"),m=["brizo_id","base_enrich_date","inbound_add_to_cadence","execution_time_seconds","auto_dq_flag","auto_dq_reason","gmv_pred"];r?l.each(function(){let c=$(this).attr("name");if(m.includes(c)&&o.hasOwnProperty(c)){var s=o[c];typeof s=="number"||!isNaN(s)&&!isNaN(parseFloat(s))?$(this).val(Number(s).toFixed(2)):$(this).val(s)}}):h(!1)}function I(){let o=!0;return v.find(":input:visible, select").each(function(){let r=q($(this));o=o&&r}),o}function h(o){console.log(o),d("base_enrich_date",new Date().toISOString().slice(0,10)),d("inbound_add_to_cadence","true"),o===!1&&(d("execution_time_seconds",0),d("auto_dq_flags","true")),o===!0&&(d("execution_time_seconds",0),d("auto_dq_reason","none"),d("auto_dq_flags","false"),d("self_service_scheduling_shown",!0))}function G(){d("page_url",t?"/demo-schedule":window.location.pathname),d("page_lang",$("html").attr("lang")),d("url",(()=>{var r=p();if(r&&r.url){var l=r.url;return l.split("cid=")[1]}return"none"})());function o(){let r=J();if(!r||Object.keys(r).length===0){console.log("No UTM parameters found in session storage");return}let l=$("input"),m={},c={};l.each(function(){let s=$(this).attr("name");if(s)if(s.startsWith("0-2/")){let f=s.substring(4);c[f]=$(this)}else m[s]=$(this)}),Object.keys(r).forEach(s=>{let f=r[s];f&&(m[s]&&(m[s].val(f),console.log(`Set regular input ${s} = ${f}`)),c[s]&&(c[s].val(f),console.log(`Set prefixed input 0-2/${s} = ${f}`)))})}o()}async function H(){let o=I();if(console.log(o),o){S(!0);try{if(await y(),typeof e!="boolean"){let r=await w(),l=r.auto_dq_flag;d("self_service_enrichment_api_used",!0),typeof l=="string"?(e=r.auto_dq_flag!=="True",b(r,!0),e&&d("self_service_scheduling_shown",!0)):(e=!1,b(r,!1))}else h(e)}catch(r){e=!1,console.log("Qualification check or call failed:",r)}G(),T(v,P,K),a("Form Button Clicked"),z(P)}}function B(){H()}let Q=()=>{let o=$(".demo-form_success"),r=t&&e,l=!window.location.href.includes("/blog/")&&!window.location.href.includes("/resources/")&&!window.location.href.includes("/downloads/");if(S(!1),v.hide(),r){let s=function(f){var g=$.extend({},m,f);$(g.selector).html('<div class="meetings-iframe-container" data-src="'+g.link+`?embed=true&firstName=${g.fName}&lastName=${g.lName}&email=${g.email}&company=${g.company}"></div>`),$.getScript("https://static.hsappstatic.net/MeetingsEmbed/ex/MeetingsEmbedCode.js").done(function(){o.show()})};var c=s,m={link:"https://meetings.hubspot.com/jonathan-shenkman/self-scheduling",selector:".demo-form_success",email:x("email"),fName:x("first-name"),lName:x("last-name"),company:x("name")};s()}else l?(o.show(),window.location.href="https://www.owner.com/funnel-demo-requested"):o.show()},v=$("[demo-form]"),P;hbspt.forms.create({portalId:"6449395",formId:"f3807262-aed3-4b9c-93a3-247ad4c55e60",target:"#hbst-form",onFormReady:M,onFormSubmit:function(){console.log("Submit"),a("Form Submission Attempt")},onFormSubmitted:()=>{a("Form Submission Sent"),i(),setTimeout(()=>{Q()},200)}}),L().then(function(o){P=$(o)});let K={name:["company","0-2/name"],international_phone_number:["phone","0-2/phone"],"restaurant-address":["address","0-2/address"],locality:["city","0-2/city"],administrative_area_level_1:["state","0-2/state"],postal_code:["zip","0-2/zip"],country:["country","0-2/country"],"first-name":"firstname","last-name":"lastname",cellphone:"mobilephone",email:"email","person-type":"lead_person_type",website:"website",place_id:"place_id",url:"place_cid",place_types:["place_types_contact","0-2/place_types"],rating:"place_rating",user_ratings_total:"user_ratings_total","number-of-locations":"of_locations_number",hear:"how_did_you_hear_about_us",page_url:"last_pdf_download",page_lang:"page_lang",brizo_id:["brizo_id","0-2/brizo_id_account"],base_enrich_date:["auto_enrich_date","0-2/auto_enrich_date_company"],inbound_add_to_cadence:"inbound_add_to_cadence",execution_time_seconds:"auto_enrich_time",auto_dq_flag:"auto_dq_static",auto_dq_reason:["auto_dq_reason","0-2/auto_dq_reason_company"],gmv_pred:["pred_gmv","0-2/pred_gmv_company"]};$("[data-form=submit-btn]").on("click",B),$('select[name="person-type"]').on("change",function(){$(this).val()==="I'm a restaurant owner or manager"?$("#locations-wrap").show():$("#locations-wrap").hide()}),new Cleave('input[name="cellphone"]',{numericOnly:!0,blocks:[0,3,3,4,10],delimiters:["(",") ","-"],delimiterLazyShow:!0})});})();
